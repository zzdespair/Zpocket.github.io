{"pages":[{"title":"","text":"ä¸ªäººç®€ä»‹ åˆ†äº«å¾ˆå–œæ¬¢çš„è€ç½—çš„ä¸€æ®µè¯ï¼š â€œæ¯ä¸€ä¸ªç”Ÿå‘½æ¥åˆ°ä¸–é—´éƒ½æ³¨å®šæ”¹å˜ä¸–ç•Œï¼Œåˆ«æ— é€‰æ‹©ã€‚è¦ä¹ˆå˜å¾—å¥½ä¸€ç‚¹ï¼Œè¦ä¹ˆå˜å¾—åä¸€ç‚¹ã€‚ä½ å¦‚æœèµ°è¿›ç¤¾ä¼šä¸ºäº†ç”Ÿå­˜ä¸ºäº†ä»€ä¹ˆä¸è¦è„¸çš„ç†ç”±ï¼Œå˜æˆäº†ä¸€ä¸ªæ¶å¿ƒçš„æˆå¹´äººç¤¾ä¼šä¸­çš„ä¸€å‘˜ï¼Œé‚£ä½ å°±æŠŠè¿™ä¸ªä¸–ç•Œå˜å¾—æ¶å¿ƒäº†ä¸€ç‚¹ç‚¹ã€‚å¦‚æœä½ ä¸€ç”Ÿåˆšæ­£ä¸é˜¿ï¼Œå¦‚æœä½ ä¸€ç”Ÿè€¿ç›´ï¼Œæ²¡æœ‰åšä»»ä½•æ¶å¿ƒçš„äº‹æƒ…ï¼Œæ²¡åšå¯¹åˆ«äººæœ‰å®³çš„äº‹æƒ…ï¼Œä¸€è¾ˆå­æ‹¼äº†è€å‘½å‹‰å¼ºæŠŠè‡ªå·±èº«è¾¹çš„å‡ ä¸ªäººç…§é¡¾å¥½äº†ï¼Œæ²¡æœ‰æˆåæ²¡æœ‰å‘è´¢ï¼Œæ²¡æœ‰æˆå°±ä¼Ÿå¤§çš„äº‹ä¸šï¼Œç„¶åè€¿ç€è„–å­ä¸€ç”Ÿæ­£ç›´ï¼Œåˆ°äº†ä¸ƒå…«åå²è€¿ç€è„–å­å»ä¸–äº†ã€‚ä½ è¿™ä¸€ç”Ÿæ˜¯ä¸æ˜¯æ²¡æœ‰æ”¹å˜ä¸–ç•Œï¼Ÿä½ è¿˜æ˜¯æ”¹å˜ä¸–ç•Œäº†ï¼Œä½ æŠŠè¿™ä¸ªä¸–ç•Œå˜å¾—ç¾å¥½äº†ä¸€ç‚¹ç‚¹ã€‚å› ä¸ºä¸–ç•Œä¸Šåˆå¤šäº†ä¸€ä¸ªå¥½äººã€‚â€œ å–„æ¶ç»ˆæœ‰æŠ¥,å¤©é“å¥½è½®å›ã€‚ä¸ä¿¡æŠ¬å¤´çœ‹,è‹å¤©é¥¶è¿‡è°ã€‚æ— è®ºä½•æ—¶ä½•åœ°ï¼Œæˆ‘ä»¬éƒ½è¦ä¿æŒä¸€é¢—ç§¯æä¹è§‚ã€å–„è‰¯æ„Ÿæ©çš„å¿ƒã€‚ä½†è¡Œå¥½äº‹è«é—®å‰ç¨‹ï¼Œæ°¸è¿œå¹´è½»ï¼Œæ°¸è¿œçƒ­å†…ç›ˆçœ¶ï¼Œæ°¸è¿œä¿æŒæ­£èƒ½é‡ã€‚ğŸ’ªğŸ’ªğŸ’ªğŸ’ªğŸ’ªğŸ’ªå†²é¸­ï¼ï¼ï¼ï¼ -&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;ä¸ªäººä¿¡æ¯ï¼šè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ä¸“ä¸šä»äº‹JAVAåç«¯å¼€å‘ç ç•œä¸€æšåšä¿¡ä»£ç æ”¹å˜ä¸–ç•Œ åšå®¢ä¿¡æ¯ ç½‘ç«™é‡‡ç”¨çš„Icarusä¸»é¢˜ è¿½æ±‚å°½å¯èƒ½çš„ç®€æ´ï¼Œæ¸…æ™°ï¼Œæ˜“ç”¨ã€‚ åœ¨Icarusä¸»é¢˜ä¹‹ä¸Šè¿›è¡Œäº†éƒ¨åˆ†ä¿®æ”¹ã€‚ æ›´æ–°æ—¥å¿—ï¼šâ€“2020.01.18ï¼šicarus3.0é€‚é…â€“2019.11.17ï¼šå¢åŠ æ·±è‰²ä¸»é¢˜å¼€å…³â€“2019.10.30ï¼šå»å›¾ï¼Œç²¾ç®€å¡ç‰‡â€“2019.10.22ï¼šæ”¹ç‰ˆéƒ¨åˆ†æ˜¾ç¤ºï¼Œä¼˜åŒ–é€Ÿåº¦â€“2019.10.16ï¼šæ–‡ç« åˆ—è¡¨åŠ ä¸Šè¯„è®ºæ•°æ˜¾ç¤ºâ€“2019.10.13ï¼šæ”¹ç‰ˆè¯„è®ºâ€“2019.09.25ï¼šå›¾ç‰‡ã€èµ„æºæ¥å…¥CDNå…è´¹jsDelivrã€æ–‡ç« åŠ å…¥ç½®é¡¶â€“2019.09.19ï¼šå¼€æºåšå®¢ä»£ç â€“2019.09.19ï¼šä¿®æ”¹å¸ƒå±€ï¼Œæ‹‰ä¼¸å¸ƒå±€ï¼Œæ›´å®½çš„å±•ç¤ºâ€“2019.09.18ï¼šä¿®æ”¹å‹é“¾uiä¸ºä¸€è¡Œä¸‰ä¸ªï¼Œå¹¶é€‚é…ç§»åŠ¨ç«¯ï¼Œæš—é»‘æ¨¡å¼æ–‡ç« å¢åŠ è¯„è®ºé“¾æ¥ï¼Œå¢åŠ ç•™è¨€é“¾æ¥â€“2019.09.14ï¼šå¢åŠ ç²¾ç®€nextä¸»é¢˜â€“2019.09.14ï¼šåˆ©ç”¨ä¸­ç§‹èŠ‚æ”¾å‡ï¼Œé‡åšäº†é¦–é¡µçš„çƒ­é—¨æ¨èã€åŠ ä¸ªwidgetæœ€æ–°è¯„è®ºæ¡†ã€å½’æ¡£é¡µåŠ å…¥æ–‡ç« è´¡çŒ®æ¦‚è§ˆé¢æ¿ æœ¬ç«™æ¨èç´¢å¼• åšå®¢ä¸»é¢˜ç›¸å…³ github Issue ä½œä¸ºåšå®¢å¾®å‹æ•°æ®åº“çš„åº”ç”¨ github pageç½‘ç«™cdnä¼˜åŒ–åŠ é€Ÿ åšå®¢æºç åˆ†äº« åšå®¢æ¢è‚¤çš„ä¸€ç§å®ç°æ–¹å¼æ€è·¯ åšå®¢ä¸­gitalkæœ€æ–°è¯„è®ºçš„è·å– åšå®¢å›¾ç‰‡ä¸Šä¼ picgoå·¥å…·githubå›¾ä¼ ä½¿ç”¨ å®‰è£…ã€éƒ¨åˆ†é…ç½®icarusä¸»é¢˜ä¸­æ–‡ç‰ˆ æŠ€æœ¯çŸ¥è¯†ç‚¹ Javaå¹¶å‘çŸ¥è¯†ç‚¹ æ³•å¾‹æ³•è§„ æ³•å¾‹æ³•è§„æ•°æ®åº“ ä¸­åäººæ°‘å…±å’Œå›½å›½æ——æ³• ä¸­åäººæ°‘å…±å’Œå›½å®ªæ³• ä¸­åäººæ°‘å…±å’Œå›½æ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³• ä¸­åäººæ°‘å…±å’Œå›½åˆ‘äº‹è¯‰è®¼æ³• ä¸­åäººæ°‘å…±å’Œå›½å©šå§»æ³• ä¸­åäººåå…±å’Œå›½ç½‘ç»œå®‰å…¨æ³• ä¸­åäººæ°‘å…±å’Œå›½åŠ³åŠ¨æ³• å…¶ä»– ç½‘æ˜“äº‘éŸ³ä¹æ­Œå•åˆ†äº« è®¡åˆ’2020è®¡åˆ’ 2019.12.31 2020-GOALS è·‘ä¸¤ä¸‰åœºé©¬æ‹‰æ¾ 2019è®¡åˆ’ 2018.12.31/21:59:00-&gt;æ›´æ–°äº2019.12.31 2019-GOALS è´­ä¹°çš„ä¸“ä¸šä¹¦ç±è‡³å°‘çœ‹å®Œä¸€éï¼ˆå¹¶å‘ã€é‡æ„ã€è®¾è®¡æ¨¡å¼â€¦ï¼‰-&gt; 95% é¢å¤–ï¼š è¿½äº†å¾ˆå¤šå‰§ æ€»ç»“ï¼š æœ‰ä¼˜ç‚¹æœ‰ç¼ºç‚¹ï¼Œæ²¡åšæŒä¸‹æ¥çš„è¿˜æ˜¯å¤ªå¤šï¼Œè¿½äº†å¤ªå¤šå‰§ã€‚ä»¥åå¤šå­¦ä¹ ï¼Œå¤šæ€è€ƒï¼ æ—¶é—´è½´è®°å½•","link":"/about/index.html"},{"title":"","text":"å”è‰ºæ˜• ææ² æä¸€æ¡ gakki å›¾ç‰‡æœé›†äºäº’è”ç½‘ï¼Œä¾µæƒè¯·ç•™è¨€ï¼Œé©¬ä¸Šå¤„ç†ğŸ˜Šã€‚","link":"/album/index.html"},{"title":"","text":"&nbsp;&nbsp;å¬å¬éŸ³ä¹ éŸ³ä¹æ’­æ”¾å™¨ç”±mePlayeræä¾›ï¼Œå¸ƒå±€å‚ç…§ç½‘å‹åšå®¢æ‰€ä½œï¼Œæ„Ÿè°¢ä½œè€…çš„è¾›å‹¤ä»˜å‡ºã€‚æ›´å¤šéŸ³ä¹åˆ†äº«è¯·æŸ¥çœ‹æ­Œå•ã€‚ &nbsp;&nbsp;çœ‹çœ‹è§†é¢‘ ->ç‚¹å‡»ä»¥ä¸‹æ¡ç›®å¼€å§‹æ’­æ”¾è§†é¢‘,å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š","link":"/media/index.html"},{"title":"","text":"ç”³è¯·å‹é“¾é¡»çŸ¥ åŸåˆ™ä¸Šåªå’ŒæŠ€æœ¯ç±»åšå®¢äº¤æ¢ï¼Œä½†ä¸åŒ…æ‹¬å«æœ‰å’Œè‰²æƒ…ã€æš´åŠ›ã€æ”¿æ²»æ•æ„Ÿçš„ç½‘ç«™ã€‚ ä¸å’Œå‰½çªƒã€ä¾µæƒã€æ— è¯šä¿¡çš„ç½‘ç«™äº¤æ¢ï¼Œä¼˜å…ˆå’Œå…·æœ‰åŸåˆ›ä½œå“çš„ç½‘ç«™äº¤æ¢ã€‚ ç”³è¯·è¯·æä¾›ï¼šç«™ç‚¹åç§°ã€ç«™ç‚¹é“¾æ¥ã€ç«™ç‚¹æè¿°ã€logoæˆ–å¤´åƒï¼ˆä¸è¦è®¾ç½®é˜²ç›—é“¾ï¼‰ã€‚ æ’åä¸åˆ†å…ˆåï¼Œåˆ·æ–°åé‡æ’ï¼Œæ›´æ–°ä¿¡æ¯åè¯·ç•™è¨€å‘ŠçŸ¥ã€‚ ä¼šå®šæœŸæ¸…ç†å¾ˆä¹…å¾ˆä¹…ä¸æ›´æ–°çš„ã€ä¸ç¬¦åˆè¦æ±‚çš„å‹é“¾ï¼Œä¸å†å¦è¡Œé€šçŸ¥ã€‚ æœ¬ç«™ä¸å­˜å‚¨å‹é“¾å›¾ç‰‡ï¼Œå¦‚æœå‹é“¾å›¾ç‰‡æ¢äº†æ— æ³•æ›´æ–°ã€‚å›¾ç‰‡è£‚äº†çš„ä¼šæ›¿æ¢æˆé»˜è®¤å›¾ï¼Œéœ€è¦æ›´æ¢çš„è¯·ç•™è¨€å‘ŠçŸ¥ã€‚ æœ¬ç«™å‹é“¾ä¿¡æ¯å¦‚ä¸‹ï¼Œç”³è¯·å‹é“¾å‰è¯·å…ˆæ·»åŠ æœ¬ç«™ä¿¡æ¯ï¼š ç½‘ç«™å›¾æ ‡ï¼šhttps://removeif.github.io/images/avatar.jpg ç½‘ç«™åç§°ï¼šè¾£æ¤’ã®é…± ç½‘ç«™åœ°å€ï¼šhttps://removeif.github.io ç½‘ç«™ç®€ä»‹ï¼šåç«¯å¼€å‘ï¼ŒæŠ€æœ¯åˆ†äº« åŠ è½½ä¸­ï¼Œç¨ç­‰å‡ ç§’...","link":"/friend/index.html"},{"title":"","text":"æ¥è€Œä¸å¾€éç¤¼ä¹Ÿç•…æ‰€æ¬²è¨€ï¼Œæœ‰ç•™å¿…åº”","link":"/message/index.html"},{"title":"éŸ³ä¹æ­Œå•æ”¶è—","text":"--- æ¸©é¦¨æç¤ºï¼šé€‰æ‹©å–œæ¬¢çš„éŸ³ä¹åŒå‡»æ’­æ”¾ï¼Œç”±äºç‰ˆæƒåŸå› éƒ¨åˆ†ä¸èƒ½æ’­æ”¾ã€‚å¦‚æœå–œæ¬¢æ­Œå•æ”¶è—ä¸€ä¸‹ï¼Œå»ç½‘æ˜“äº‘éƒ½èƒ½æ’­æ”¾å“Ÿï¼","link":"/music/index.html"},{"title":"","text":"ç¢ç¢å¿µ tipsï¼šgithubç™»å½•åæŒ‰æ—¶é—´æ­£åºæŸ¥çœ‹ã€å¯ç‚¹èµåŠ â¤ï¸ã€æœ¬æ’ä»¶åœ°å€..ã€Œ+99æ¬¡æŸ¥çœ‹ã€ ç¢ç¢å¿µåŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰... $.getScript(\"/js/gitalk_self.min.js\", function () { var gitalk = new Gitalk({ clientID: '46a9f3481b46ea0129d8', clientSecret: '79c7c9cb847e141757d7864453bcbf89f0655b24', id: '666666', repo: 'issue_database', owner: 'removeif', admin: \"removeif\", createIssueManually: true, distractionFreeMode: false }); gitalk.render('comment-container1'); });","link":"/self-talking/index.html"}],"posts":[{"title":"Elasticsearch ç¬”è®°","text":"æ‘˜è¦ å› æœ€è¿‘é¡¹ç›®éœ€æ±‚ï¼Œå¼€å§‹ä½¿ç”¨Elasticsearchã€‚ å› æ­¤é‡åˆ°ä¸å°‘å‘ï¼Œå’Œä¸ä¹ æƒ¯çš„åœ°æ–¹ï¼Œæœ¬ç¯‡æ–‡ç« ä¸å®šæœŸæ›´ç»†ï¼Œä¸»è¦ç”¨ä½œç¬”è®°å’Œè®°å½• Elasticsearch å®‰è£…æ­¤å¤„çœç•¥ Elasticsearch åŸºæœ¬ä½¿ç”¨å¯åŠ¨ Elasticsearchè¾“å…¥ä¸€ä¸‹æŒ‡ä»¤å¼€å¯æœåŠ¡ 1sudo systemctl restart elasticsearch.service æœ¬åœ°ç¯å¢ƒæ˜¯Macä¸‹æ­å»ºçš„Homesteadç¯å¢ƒï¼Œå†…æ ¸ä¿¡æ¯å¦‚ä¸‹ 1Linux version 4.15.0-96-generic (buildd@lgw01-amd64-004) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #97-Ubuntu SMP Wed Apr 1 03:25:46 UTC 2020 åˆæ¬¡ä½¿ç”¨åˆ›å»ºæœ€ç®€å•çš„æ•°æ® 12345curl -X PUT \"localhost:9200/customer/_doc/1?pretty\" -H 'Content-Type: application/json' -d'{ \"name\": \"John Doe\"}' Esæ‰€æœ‰Apiè®¿é—®æ–¹å¼éƒ½æ˜¯Httpè®¿é—®ï¼Œæ‰€ä»¥ä½¿ç”¨curlæ–¹å¼è¿æ¥å’Œä¼ è¾“æ•°æ® å¦‚æœè¯¥è¯·æ±‚customerå°šä¸å­˜åœ¨ï¼Œæ­¤è¯·æ±‚å°†è‡ªåŠ¨åˆ›å»ºè¯¥ç´¢å¼•ï¼Œæ·»åŠ IDä¸ºçš„æ–°æ–‡æ¡£1ï¼Œå¹¶å­˜å‚¨è¯¥nameå­—æ®µå¹¶ä¸ºå…¶å»ºç«‹ç´¢å¼•ã€‚ ç”±äºè¿™æ˜¯ä¸€ä¸ªæ–°æ–‡æ¡£ï¼Œå› æ­¤å“åº”æ˜¾ç¤ºè¯¥æ“ä½œçš„ç»“æœæ˜¯åˆ›å»ºäº†è¯¥æ–‡æ¡£çš„ç‰ˆæœ¬1ï¼š è¿”å›ä½“ï¼š 1234567891011121314{ &quot;_index&quot; : &quot;customer&quot;, &quot;_type&quot; : &quot;_doc&quot;, &quot;_id&quot; : &quot;1&quot;, &quot;_version&quot; : 1, &quot;result&quot; : &quot;created&quot;, &quot;_shards&quot; : { &quot;total&quot; : 2, &quot;successful&quot; : 2, &quot;failed&quot; : 0 }, &quot;_seq_no&quot; : 26, &quot;_primary_term&quot; : 4} æ–°æ–‡æ¡£å¯ç«‹å³ä»ç¾¤é›†ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä½¿ç”¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æŒ‡å®šæ–‡æ¡£IDçš„GETè¯·æ±‚æ£€ç´¢å®ƒï¼š 1curl -X GET \"localhost:9200/customer/_doc/1?pretty\" è¯¥å“åº”è¡¨æ˜æ‰¾åˆ°äº†å…·æœ‰æŒ‡å®šIDçš„æ–‡æ¡£ï¼Œå¹¶æ˜¾ç¤ºäº†å·²ç´¢å¼•çš„åŸå§‹æºå­—æ®µã€‚ 123456789101112{ \"_index\" : \"customer\", \"_type\" : \"_doc\", \"_id\" : \"1\", \"_version\" : 1, \"_seq_no\" : 26, \"_primary_term\" : 4, \"found\" : true, \"_source\" : { \"name\": \"John Doe\" }} æ‰¹é‡æ·»åŠ æ–‡ä»¶å¦‚æœæ‚¨æœ‰å¾ˆå¤šè¦æ·»åŠ çš„æ–‡æ¡£ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ‰¹é‡APIæ‰¹é‡æäº¤ã€‚ä½¿ç”¨æ‰¹é‡å¤„ç†æ‰¹å¤„ç†æ–‡æ¡£æ“ä½œæ¯”å•ç‹¬æäº¤è¯·æ±‚è¦å¿«å¾—å¤šï¼Œå› ä¸ºå®ƒå¯ä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°ã€‚ æœ€ä½³æ‰¹å¤„ç†å¤§å°å–å†³äºè®¸å¤šå› ç´ ï¼šæ–‡æ¡£å¤§å°å’Œå¤æ‚æ€§ï¼Œç´¢å¼•ç¼–åˆ¶å’Œæœç´¢è´Ÿè½½ä»¥åŠç¾¤é›†å¯ç”¨çš„èµ„æºã€‚ä¸€ä¸ªå¥½çš„èµ·ç‚¹æ˜¯æ‰¹å¤„ç†1,000è‡³5,000ä¸ªæ–‡æ¡£ï¼Œæ€»æœ‰æ•ˆè´Ÿè½½åœ¨5MBè‡³15MBä¹‹é—´ã€‚ä»é‚£é‡Œï¼Œæ‚¨å¯ä»¥å°è¯•æ‰¾åˆ°æœ€ä½³ä½ç½®ã€‚ è¦å°†ä¸€äº›æ•°æ®å¯¼å…¥Elasticsearchï¼Œæ‚¨å¯ä»¥å¼€å§‹æœç´¢å’Œåˆ†æï¼š ä¸‹è½½accounts.jsonæ ·æœ¬æ•°æ®é›†ã€‚æ­¤éšæœºç”Ÿæˆçš„æ•°æ®é›†ä¸­çš„æ–‡æ¡£ä»£è¡¨å…·æœ‰ä»¥ä¸‹ä¿¡æ¯çš„ç”¨æˆ·å¸æˆ·ï¼š 12345678910111213{ \"account_number\": 0, \"balance\": 16623, \"firstname\": \"Bradshaw\", \"lastname\": \"Mckenzie\", \"age\": 29, \"gender\": \"F\", \"address\": \"244 Columbus Place\", \"employer\": \"Euron\", \"email\": \"bradshawmckenzie@euron.com\", \"city\": \"Hobucken\", \"state\": \"CO\"} bankä½¿ç”¨ä»¥ä¸‹_bulkè¯·æ±‚å°†å¸æˆ·æ•°æ®æ·»åŠ åˆ°ç´¢å¼•ä¸­ï¼š 123curl -H \"Content-Type: application/json\" -XPOST \"localhost:9200/bank/_bulk?pretty&amp;refresh\" --data-binary \"@accounts.json\" curl \"localhost:9200/_cat/indices?v\" å“åº”è¡¨æ˜æˆåŠŸæ·»åŠ äº†1,000ä¸ªæ–‡æ¡£ã€‚ 12health status index uuid pri rep docs.count docs.deleted store.size pri.store.sizeyellow open bank l7sSYV2cQXmu6_4rJWVIww 5 1 1000 0 128.6kb 128.6kb å¼€å§‹æœç´¢å°†ä¸€äº›æ•°æ®æ‘„å–åˆ°Elasticsearchç´¢å¼•åï¼Œæ‚¨å¯ä»¥é€šè¿‡å°†è¯·æ±‚å‘é€åˆ°_searchç«¯ç‚¹æ¥å¯¹å…¶è¿›è¡Œæœç´¢ã€‚è¦è®¿é—®å…¨å¥—æœç´¢åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨Elasticsearch Query DSLåœ¨è¯·æ±‚æ­£æ–‡ä¸­æŒ‡å®šæœç´¢æ¡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨è¯·æ±‚URIä¸­æŒ‡å®šè¦æœç´¢çš„ç´¢å¼•çš„åç§°ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚æ£€ç´¢bank æŒ‰å¸å·æ’åºçš„ç´¢å¼•ä¸­çš„æ‰€æœ‰æ–‡æ¡£ï¼š 12345678curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"query\": { \"match_all\": {} }, \"sort\": [ { \"account_number\": \"asc\" } ]}' é»˜è®¤æƒ…å†µä¸‹ï¼Œhitså“åº”éƒ¨åˆ†åŒ…æ‹¬ä¸æœç´¢æ¡ä»¶åŒ¹é…çš„å‰10ä¸ªæ–‡æ¡£ï¼š 123456789101112131415161718192021222324252627282930313233{ \"took\" : 63, \"timed_out\" : false, \"_shards\" : { \"total\" : 5, \"successful\" : 5, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\": 1000, \"relation\": \"eq\" }, \"max_score\" : null, \"hits\" : [ { \"_index\" : \"bank\", \"_type\" : \"_doc\", \"_id\" : \"0\", \"sort\": [0], \"_score\" : null, \"_source\" : {\"account_number\":0,\"balance\":16623,\"firstname\":\"Bradshaw\",\"lastname\":\"Mckenzie\",\"age\":29,\"gender\":\"F\",\"address\":\"244 Columbus Place\",\"employer\":\"Euron\",\"email\":\"bradshawmckenzie@euron.com\",\"city\":\"Hobucken\",\"state\":\"CO\"} }, { \"_index\" : \"bank\", \"_type\" : \"_doc\", \"_id\" : \"1\", \"sort\": [1], \"_score\" : null, \"_source\" : {\"account_number\":1,\"balance\":39225,\"firstname\":\"Amber\",\"lastname\":\"Duke\",\"age\":32,\"gender\":\"M\",\"address\":\"880 Holmes Lane\",\"employer\":\"Pyrami\",\"email\":\"amberduke@pyrami.com\",\"city\":\"Brogan\",\"state\":\"IL\"} }, ... ] }} è¯¥å“åº”è¿˜æä¾›æœ‰å…³æœç´¢è¯·æ±‚çš„ä»¥ä¸‹ä¿¡æ¯ï¼š took â€“ Elasticsearchè¿è¡ŒæŸ¥è¯¢æ‰€éœ€çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ timed_out â€“æœç´¢è¯·æ±‚æ˜¯å¦è¶…æ—¶ _shards â€“æœç´¢äº†å¤šå°‘ä¸ªåˆ†ç‰‡ï¼Œä»¥åŠæˆåŠŸï¼Œå¤±è´¥æˆ–è·³è¿‡äº†å¤šå°‘ä¸ªåˆ†ç‰‡ã€‚ max_score â€“æ‰¾åˆ°çš„æœ€ç›¸å…³æ–‡ä»¶çš„åˆ†æ•° hits.total.value -æ‰¾åˆ°äº†å¤šå°‘ä¸ªåŒ¹é…çš„æ–‡æ¡£ hits.sort -æ–‡æ¡£çš„æ’åºä½ç½®ï¼ˆä¸æŒ‰ç›¸å…³æ€§å¾—åˆ†æ’åºæ—¶ï¼‰ hits._score-æ–‡æ¡£çš„ç›¸å…³æ€§å¾—åˆ†ï¼ˆä½¿ç”¨æ—¶ä¸é€‚ç”¨match_allï¼‰ æ¯ä¸ªæœç´¢è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼šElasticsearchä¸ä¼šåœ¨è¯·æ±‚ä¸­ç»´æŠ¤ä»»ä½•çŠ¶æ€ä¿¡æ¯ã€‚è¦ç¿»é˜…æœç´¢ç»“æœï¼Œè¯·åœ¨æ‚¨çš„è¯·æ±‚ä¸­æŒ‡å®šfromå’Œsizeå‚æ•°ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚çš„åŒ¹é…æ•°ä¸º10åˆ°19ï¼š 12345678910curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"query\": { \"match_all\": {} }, \"sort\": [ { \"account_number\": \"asc\" } ], \"from\": 10, \"size\": 10}' ç°åœ¨ï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•æäº¤åŸºæœ¬çš„æœç´¢è¯·æ±‚ï¼Œå¯ä»¥å¼€å§‹æ„å»ºæ¯”æœ‰è¶£çš„æŸ¥è¯¢match_allã€‚ è¦åœ¨å­—æ®µä¸­æœç´¢ç‰¹å®šæœ¯è¯­ï¼Œå¯ä»¥ä½¿ç”¨matchæŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚æœç´¢è¯¥addresså­—æ®µä»¥æŸ¥æ‰¾åœ°å€åŒ…å«millæˆ–çš„å®¢æˆ·laneï¼š 12345curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"query\": { \"match\": { \"address\": \"mill lane\" } }}' è¦æ‰§è¡Œè¯ç»„æœç´¢è€Œä¸æ˜¯åŒ¹é…å•ä¸ªè¯ï¼Œè¯·ä½¿ç”¨ match_phraseä»£æ›¿matchã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚ä»…åŒ¹é…åŒ…å«çŸ­è¯­çš„åœ°å€mill laneï¼š 12345curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"query\": { \"match_phrase\": { \"address\": \"mill lane\" } }}' è¦æ„é€ æ›´å¤æ‚çš„æŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨boolæŸ¥è¯¢æ¥ç»„åˆå¤šä¸ªæŸ¥è¯¢æ¡ä»¶ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ï¼ˆå¿…é¡»åŒ¹é…ï¼‰ï¼ŒæœŸæœ›ï¼ˆåº”åŒ¹é…ï¼‰æˆ–ä¸æœŸæœ›ï¼ˆå¿…é¡»ä¸åŒ¹é…ï¼‰æŒ‡å®šæ¡ä»¶ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚åœ¨bankç´¢å¼•ä¸­æœç´¢å±äº40å²å®¢æˆ·çš„å¸æˆ·ï¼Œä½†ä¸åŒ…æ‹¬å±…ä½åœ¨çˆ±è¾¾è·å·ï¼ˆIDï¼‰çš„ä»»ä½•äººï¼š 1234567891011121314curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"query\": { \"bool\": { \"must\": [ { \"match\": { \"age\": \"40\" } } ], \"must_not\": [ { \"match\": { \"state\": \"ID\" } } ] } }}' å¸ƒå°”æŸ¥è¯¢ä¸­çš„æ¯ä¸ªmustï¼Œshouldå’Œmust_notå…ƒç´ ç§°ä¸ºæŸ¥è¯¢å­å¥ã€‚æ–‡æ¡£æ»¡è¶³æ¯ä¸ªæ¡æ¬¾mustæˆ– shouldæ¡æ¬¾çš„æ ‡å‡†çš„ç¨‹åº¦æœ‰åŠ©äºæ–‡æ¡£çš„ç›¸å…³æ€§å¾—åˆ†ã€‚åˆ†æ•°è¶Šé«˜ï¼Œæ–‡æ¡£å°±è¶Šç¬¦åˆæ‚¨çš„æœç´¢æ¡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchè¿”å›æŒ‰è¿™äº›ç›¸å…³æ€§åˆ†æ•°æ’åçš„æ–‡æ¡£ã€‚ must_notå­å¥ä¸­çš„æ¡ä»¶è¢«è§†ä¸ºè¿‡æ»¤å™¨ã€‚å®ƒå½±å“æ–‡ä»¶æ˜¯å¦åŒ…å«åœ¨ç»“æœä¸­ï¼Œä½†ä¸ä¼šå½±å“æ–‡ä»¶çš„è¯„åˆ†æ–¹å¼ã€‚æ‚¨è¿˜å¯ä»¥æ˜¾å¼æŒ‡å®šä»»æ„è¿‡æ»¤å™¨ï¼Œä»¥åŸºäºç»“æ„åŒ–æ•°æ®åŒ…æ‹¬æˆ–æ’é™¤æ–‡æ¡£ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚ä½¿ç”¨èŒƒå›´è¿‡æ»¤å™¨å°†ç»“æœé™åˆ¶ä¸ºä½™é¢åœ¨20,000ç¾å…ƒåˆ°30,000ç¾å…ƒï¼ˆå«ï¼‰ä¹‹é—´çš„å¸æˆ·ã€‚ 1234567891011121314151617curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"query\": { \"bool\": { \"must\": { \"match_all\": {} }, \"filter\": { \"range\": { \"balance\": { \"gte\": 20000, \"lte\": 30000 } } } } }}' ä½¿ç”¨èšåˆElasticsearchèšåˆä½¿æ‚¨èƒ½å¤Ÿè·å–æœ‰å…³æœç´¢ç»“æœçš„å…ƒä¿¡æ¯ï¼Œå¹¶å›ç­”è¯¸å¦‚â€œå¾·å…‹è¨æ–¯å·æœ‰å¤šå°‘ä¸ªå¸æˆ·æŒæœ‰äººï¼Ÿâ€ä¹‹ç±»çš„é—®é¢˜ã€‚æˆ–â€œç”°çº³è¥¿å·çš„å¹³å‡å¸æˆ·ä½™é¢æ˜¯å¤šå°‘ï¼Ÿâ€ æ‚¨å¯ä»¥åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­æœç´¢æ–‡æ¡£ï¼Œè¿‡æ»¤å‘½ä¸­å¹¶ä½¿ç”¨æ±‡æ€»åˆ†æç»“æœã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚ä½¿ç”¨termsæ±‡æ€»å°†bankç´¢å¼•ä¸­çš„æ‰€æœ‰å¸æˆ·æŒ‰çŠ¶æ€åˆ†ç»„ï¼Œå¹¶æŒ‰é™åºè¿”å›å¸æˆ·æ•°é‡æœ€å¤šçš„åä¸ªå·ï¼š 123456789101112curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"size\": 0, \"aggs\": { \"group_by_state\": { \"terms\": { \"field\": \"state.keyword\" } } }}' bucketså“åº”ä¸­çš„æ˜¯çš„å€¼stateå­—æ®µä¸­ã€‚è¯¥ doc_countèŠ‚ç›®åœ¨æ¯ä¸ªå·å¸æˆ·æ•°é‡ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°IDï¼ˆçˆ±è¾¾è·å·ï¼‰æœ‰27ä¸ªå¸æˆ·ã€‚å› ä¸ºè¯·æ±‚set size=0ï¼Œæ‰€ä»¥å“åº”ä»…åŒ…å«èšåˆç»“æœã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455{ \"took\": 29, \"timed_out\": false, \"_shards\": { \"total\": 5, \"successful\": 5, \"skipped\" : 0, \"failed\": 0 }, \"hits\" : { \"total\" : { \"value\": 1000, \"relation\": \"eq\" }, \"max_score\" : null, \"hits\" : [ ] }, \"aggregations\" : { \"group_by_state\" : { \"doc_count_error_upper_bound\": 20, \"sum_other_doc_count\": 770, \"buckets\" : [ { \"key\" : \"ID\", \"doc_count\" : 27 }, { \"key\" : \"TX\", \"doc_count\" : 27 }, { \"key\" : \"AL\", \"doc_count\" : 25 }, { \"key\" : \"MD\", \"doc_count\" : 25 }, { \"key\" : \"TN\", \"doc_count\" : 23 }, { \"key\" : \"MA\", \"doc_count\" : 21 }, { \"key\" : \"NC\", \"doc_count\" : 21 }, { \"key\" : \"ND\", \"doc_count\" : 21 }, { \"key\" : \"ME\", \"doc_count\" : 20 }, { \"key\" : \"MO\", \"doc_count\" : 20 } ] } }} æ‚¨å¯ä»¥ç»„åˆèšåˆä»¥æ„å»ºæ›´å¤æ‚çš„æ•°æ®æ±‡æ€»ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯·æ±‚å°†ä¸€ä¸ªavgèšåˆåµŒå¥—åœ¨å…ˆå‰çš„ group_by_stateèšåˆä¸­ï¼Œä»¥è®¡ç®—æ¯ä¸ªçŠ¶æ€çš„å¹³å‡å¸æˆ·ä½™é¢ã€‚ 12345678910111213141516171819curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"size\": 0, \"aggs\": { \"group_by_state\": { \"terms\": { \"field\": \"state.keyword\" }, \"aggs\": { \"average_balance\": { \"avg\": { \"field\": \"balance\" } } } } }}' æ‚¨å¯ä»¥é€šè¿‡æŒ‡å®štermsèšåˆå†…çš„é¡ºåºæ¥ä½¿ç”¨åµŒå¥—èšåˆçš„ç»“æœè¿›è¡Œæ’åºï¼Œè€Œä¸æ˜¯æŒ‰è®¡æ•°å¯¹ç»“æœè¿›è¡Œæ’åºï¼š 12345678910111213141516171819202122curl -X GET \"localhost:9200/bank/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"size\": 0, \"aggs\": { \"group_by_state\": { \"terms\": { \"field\": \"state.keyword\", \"order\": { \"average_balance\": \"desc\" } }, \"aggs\": { \"average_balance\": { \"avg\": { \"field\": \"balance\" } } } } }}' é™¤äº†è¿™äº›åŸºæœ¬çš„å­˜å‚¨æ¡¶å’ŒæŒ‡æ ‡èšåˆå¤–ï¼ŒElasticsearchè¿˜æä¾›äº†ä¸“é—¨çš„èšåˆï¼Œç”¨äºåœ¨å¤šä¸ªå­—æ®µä¸Šæ“ä½œå¹¶åˆ†æç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚æ—¥æœŸï¼ŒIPåœ°å€å’Œåœ°ç†æ•°æ®ã€‚æ‚¨è¿˜å¯ä»¥å°†å•ä¸ªèšåˆçš„ç»“æœé¦ˆé€åˆ°ç®¡é“èšåˆä¸­ï¼Œä»¥è¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚ èšåˆæä¾›çš„æ ¸å¿ƒåˆ†æåŠŸèƒ½å¯å¯ç”¨é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥æ£€æµ‹å¼‚å¸¸ã€‚ Elasticsearch æœç´¢URLæœç´¢é€šè¿‡æŸ¥è¯¢å‚æ•°æä¾›æŸ¥è¯¢ã€‚URIæœç´¢å¾€å¾€æ›´ç®€å•ï¼Œæœ€é€‚åˆæµ‹è¯•ã€‚ 1curl -X GET \"localhost:9200/my-index-000001/_search?q=user.id:kimchy&amp;pretty\" è½¬æ¢ä¸ºDSLæœç´¢å°±æ˜¯ 123456789curl -X GET \"localhost:9200/my-index-000001,my-index-000002/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"query\": { \"match\": { \"user.id\": \"kimchy\" } }}' Request body searches (DSLæœç´¢)é€šè¿‡APIè¯·æ±‚çš„JSONä¸»ä½“æä¾›æŸ¥è¯¢ã€‚è¿™äº›æŸ¥è¯¢æ˜¯ç”¨æŸ¥è¯¢DSLç¼–å†™çš„ã€‚åœ¨æ—¥å¸¸é¡¹ç›®å¼€å‘ä¸­è¯·æ±‚æ­£æ–‡æœç´¢æ˜¯é‡ä¸­ä¹‹é‡ã€‚ _source è¿‡æ»¤å­—æ®µé»˜è®¤æƒ…å†µä¸‹ï¼Œæœç´¢å“åº”ä¸­çš„æ¯ä¸ª_sourceåŒ¹é…éƒ½åŒ…å«document ï¼Œè¿™æ˜¯å¯¹æ–‡æ¡£å»ºç«‹ç´¢å¼•æ—¶æä¾›çš„æ•´ä¸ªJSONå¯¹è±¡ã€‚å¦‚æœåœ¨æœç´¢å“åº”ä¸­ä»…éœ€è¦æŸäº›æºå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨æºè¿‡æ»¤æ¥é™åˆ¶è¿”å›æºçš„å“ªäº›éƒ¨åˆ†ã€‚ ä»…ä½¿ç”¨æ–‡æ¡£æºè¿”å›å­—æ®µæœ‰ä¸€äº›é™åˆ¶ï¼š è¯¥_sourceå­—æ®µä¸åŒ…å«å¤šå­—æ®µæˆ– å­—æ®µåˆ«åã€‚åŒæ ·ï¼Œæºä¸­çš„å­—æ®µä¹Ÿä¸åŒ…å«ä½¿ç”¨copy_toæ˜ å°„å‚æ•°å¤åˆ¶çš„å€¼ã€‚ ç”±äº_sourceåœ¨luceneä¸­å°†_så­˜å‚¨ä¸ºå•ä¸ªå­—æ®µï¼Œå› æ­¤å³ä½¿ä»…éœ€è¦å°‘é‡å­—æ®µï¼Œä¹Ÿå¿…é¡»åŠ è½½å’Œè§£ææ•´ä¸ªæºå¯¹è±¡ã€‚ ä¸ºé¿å…è¿™äº›é™åˆ¶ï¼Œæ‚¨å¯ä»¥ï¼š ä½¿ç”¨docvalue_fields å‚æ•°è·å–é€‰å®šå­—æ®µçš„å€¼ã€‚å½“è¿”å›ç›¸å½“å°‘é‡çš„æ”¯æŒdocå€¼çš„å­—æ®µï¼ˆä¾‹å¦‚å…³é”®å­—å’Œæ—¥æœŸï¼‰æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ ä½¿ç”¨stored_fieldså‚æ•°è·å–ç‰¹å®šå­˜å‚¨å­—æ®µçš„å€¼ã€‚ï¼ˆä½¿ç”¨storeæ˜ å°„é€‰é¡¹çš„å­—æ®µã€‚ï¼‰ ä½¿ç”¨åœºæ™¯ï¼š 12345678910111213curl -X GET \"localhost:9200/_search?pretty\" -H 'Content-Type: application/json' -d'{ \"_source\": { \"includes\": [ \"obj1.*\", \"obj2.*\" ], \"excludes\": [ \"*.description\" ] }, \"query\": { \"term\": { \"user.id\": \"kimchy\" } }}' åè¯ è§£é‡Š _source æºè¿‡æ»¤ è‹¥ä¼ å€¼ä¸ºfalseï¼Œä¸è¿”å›å…¨éƒ¨èµ„æº includes åˆ™ä»…è¿”å›ä¸å…¶æ¨¡å¼ä¹‹ä¸€åŒ¹é…çš„æºå­—æ®µ excludes ä»å­é›†ä¸­æ’é™¤å­—æ®µ aggs èšåˆèšåˆåŠŸèƒ½ä¸ºESæ³¨å…¥äº†ç»Ÿè®¡åˆ†æçš„è¡€ç»Ÿï¼Œä½¿ç”¨æˆ·åœ¨é¢å¯¹å¤§æ•°æ®æå–ç»Ÿè®¡æŒ‡æ ‡æ—¶å˜å¾—æ¸¸åˆƒæœ‰ä½™ã€‚èšåˆå…è®¸æˆ‘ä»¬å‘æ•°æ®æå‡ºä¸€äº›è¤‡æ‚çš„é—®é¢˜ï¼Œè™½ç„¶ä»–çš„åŠŸèƒ½å®Œå…¨ä¸åŒäºæœç´¢ï¼Œä½†ä»–ä»¬å…¶å®ä½¿ç”¨äº†ç›¸åŒçš„æ•°æ®ç»“æ„ï¼Œè¿™è¡¨ç¤ºèšåˆçš„æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶ä¸”å°±åƒæœç´¢ä¸€æ ·å‡ ä¹æ˜¯å®æ—¶çš„ã€‚ èšåˆçš„ä¸¤ä¸ªä¸»è¦çš„æ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯ æ¡¶ å’Œ æŒ‡æ ‡ æ¡¶(Buckets) : æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ–‡æ¡£çš„é›†åˆ å½“èšåˆå¼€å§‹è¢«æ‰§è¡Œï¼Œæ¯ä¸ªæ–‡æ¡£ä¼šå†³å®šç¬¦åˆå“ªä¸ªæ¡¶çš„æ¡ä»¶ï¼Œå¦‚æœåŒ¹é…åˆ°ï¼Œæ–‡æ¡£å°†æ”¾å…¥ç›¸åº”çš„æ¡¶å¹¶æ¥ç€è¿›è¡Œèšåˆæ“ä½œ åƒæ˜¯ä¸€ä¸ªå‘˜å·¥å±äºç”·æ€§æ¡¶æˆ–è€…å¥³æ€§æ¡¶ï¼Œæ—¥æœŸ2014-10-28å±äºåæœˆæ¡¶ï¼Œä¹Ÿå±äº2014å¹´æ¡¶ æ¡¶å¯ä»¥è¢«åµŒå¥—åœ¨å…¶ä»–æ¡¶é‡Œé¢ åƒæ˜¯åŒ—äº¬èƒ½æ”¾åœ¨ä¸­å›½æ¡¶è£¡ï¼Œè€Œä¸­å›½æ¡¶èƒ½æ”¾åœ¨äºšæ´²æ¡¶è£¡ Elasticsearchæä¾›äº†å¾ˆå¤šç§ç±»å‹çš„æ¡¶ï¼Œåƒæ˜¯æ—¶é—´ã€æœ€å—æ¬¢è¿çš„è¯ã€å¹´é¾„åŒºé—´ã€åœ°ç†ä½ç½®æ¡¶ç­‰ç­‰ï¼Œä¸è¿‡ä»–ä»¬åœ¨æ ¹æœ¬ä¸Šéƒ½æ˜¯é€šè¿‡åŒæ ·çš„åŸç†è¿›è¡Œæ“ä½œï¼Œä¹Ÿå°±æ˜¯åŸºäºæ¡ä»¶æ¥åˆ’åˆ†æ–‡æ¡£ï¼Œä¸€ä¸ªæ–‡æ¡£åªè¦ç¬¦åˆæ¡ä»¶ï¼Œå°±å¯ä»¥åŠ å…¥é‚£ä¸ªæ¡¶ï¼Œå› æ­¤ä¸€ä¸ªæ–‡æ¡£å¯ä»¥åŒæ—¶åŠ å…¥å¾ˆå¤šæ¡¶ æŒ‡æ ‡(Metrics) : å¯¹æ¡¶å†…çš„æ–‡æ¡£è¿›è¡Œç»Ÿè®¡è®¡ç®— æ¡¶èƒ½è®©æˆ‘ä»¬åˆ’åˆ†æ–‡æ¡£åˆ°æœ‰æ„ä¹‰çš„é›†åˆï¼Œ ä½†æ˜¯æœ€ç»ˆæˆ‘ä»¬éœ€è¦çš„æ˜¯å¯¹è¿™äº›æ¡¶å†…çš„æ–‡æ¡£è¿›è¡Œä¸€äº›æŒ‡æ ‡çš„è®¡ç®— æŒ‡æ ‡é€šå¸¸æ˜¯ç®€å•çš„æ•°å­¦è¿ç®—(åƒæ˜¯minã€maxã€avgã€sumï¼‰ï¼Œè€Œè¿™äº›æ˜¯é€šè¿‡å½“å‰æ¡¶ä¸­çš„æ–‡æ¡£çš„å€¼æ¥è®¡ç®—çš„ï¼Œåˆ©ç”¨æŒ‡æ ‡èƒ½è®©ä½ è®¡ç®—åƒå¹³å‡è–ªèµ„ã€æœ€é«˜å‡ºå”®ä»·æ ¼ã€95%çš„æŸ¥è¯¢å»¶è¿Ÿè¿™æ ·çš„æ•°æ® aggs èšåˆçš„æ¨¡æ¿ å½“queryå’Œaggsä¸€èµ·å­˜åœ¨æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œqueryçš„ä¸»æŸ¥è¯¢ï¼Œä¸»æŸ¥è¯¢queryæ‰§è¡Œå®Œåä¼šæœå‡ºä¸€æ‰¹ç»“æœï¼Œè€Œè¿™äº›ç»“æœæ‰ä¼šè¢«æ‹¿å»aggsæ‹¿å»åšèšåˆ å¦å¤–è¦æ³¨æ„aggsåé¢ä¼šå…ˆæ¥ä¸€å±‚è‡ªå®šä¹‰çš„è¿™ä¸ªèšåˆçš„åå­—ï¼Œç„¶åæ‰æ˜¯æ¥ä¸Šè¦ä½¿ç”¨çš„èšåˆæ¡¶ å¦‚æœæœ‰äº›æƒ…å†µä¸åœ¨æ„æŸ¥è¯¢ç»“æœæ˜¯ä»€éº½ï¼Œè€Œåªåœ¨æ„aggsçš„ç»“æœï¼Œå¯ä»¥æŠŠsizeè®¾ä¸º0ï¼Œå¦‚æ­¤å¯ä»¥è®©è¿”å›çš„hitsç»“æœé›†æ˜¯0ï¼ŒåŠ å¿«è¿”å›çš„é€Ÿåº¦ ä¸€ä¸ªaggsè£¡å¯ä»¥æœ‰å¾ˆå¤šä¸ªèšåˆï¼Œæ¯ä¸ªèšåˆå½¼æ­¤é—´éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå› æ­¤å¯ä»¥ä¸€ä¸ªèšåˆæ‹¿æ¥ç»Ÿè®¡æ•°é‡ã€ä¸€ä¸ªèšåˆæ‹¿æ¥åˆ†ææ•°æ®ã€ä¸€ä¸ªèšåˆæ‹¿æ¥è®¡ç®—æ ‡å‡†å·®â€¦ï¼Œè®©ä¸€æ¬¡æœç´¢å°±å¯ä»¥æŠŠæƒ³è¦åšçš„äº‹æƒ…ä¸€æ¬¡åšå®Œ åƒæ˜¯æ­¤ä¾‹å°±å®šä¹‰äº†3ä¸ªèšåˆï¼Œåˆ†åˆ«æ˜¯custom_name1ã€custom_name2ã€custom_name3 aggså¯ä»¥åµŒå¥—åœ¨å…¶ä»–çš„aggsè£¡é¢ï¼Œè€ŒåµŒå¥—çš„æ¡¶èƒ½ä½œç”¨çš„æ–‡æ¡£é›†èŒƒå›´ï¼Œæ˜¯å¤–å±‚çš„æ¡¶æ‰€è¾“å‡ºçš„ç»“æœé›† 1234567891011121314151617181920212223GET 127.0.0.1/mytest/doc/_search{ \"query\": { ... }, \"size\": 0, \"aggs\": { \"custom_name1\": { // aggsåé¢æ¥è‘—çš„æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„name \"æ¡¶\": { ... } // å†æ¥æ‰æ˜¯æ¥æ¡¶ }, \"custom_name2\": { // ä¸€ä¸ªaggsè£¡å¯ä»¥æœ‰å¾ˆå¤šèšåˆ \"æ¡¶\": { ... } }, \"custom_name3\": { \"æ¡¶\": { ..... }, \"aggs\": { // aggså¯ä»¥åµŒå¥—åœ¨åˆ«çš„aggsè£¡é¢ \"in_name\": { // è®°å¾—ä½¿ç”¨aggséœ€è¦å…ˆè‡ªå®šä¹‰ä¸€ä¸ªname \"æ¡¶\": { ... } // in_nameçš„æ¡¶ä½œç”¨çš„æ–‡æ¡£æ˜¯custom_name3çš„æ¡¶çš„ç»“æœ } } } }} è¿”å›ä½“ 123456789101112131415161718192021{ \"hits\": { \"total\": 8, \"max_score\": 0, \"hits\": [] //å› ä¸ºsizeè®¾ä¸º0ï¼Œæ‰€ä»¥æ²¡æœ‰æŸ¥è¯¢ç»“æœè¿”å› }, \"aggregations\": { \"custom_name1\": { ... }, \"custom_name2\": { ... }, \"custom_name3\": { ... , \"in_name\": { .... } } } } å®Œæ•´ä¾‹å­ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576GET /metric.*/_search // æŒ‡å®šindexæŸ¥è¯¢{ \"size\":0, // è¿”å›æ•°é™å®š0 \"aggs\": { // èšåˆå¼€å¯å…³é”®å­—ï¼Œå›ºå®šæ ¼å¼ \"2\": { // å¯¹è¿™ä¸ªèšåˆèµ·åå­— \"date_histogram\": { // è¿™ä¸ªèšåˆçš„ç±»å‹ ï¼Œè¿™é‡Œæ˜¯æ—¶é—´ç›´æ–¹å›¾èšåˆ \"fixed_interval\": \"1d\", // è¯¥èšåˆç±»å‹å†…çš„å…³é”®å­—ï¼Œåœ¨å„ä¸ªç±»å‹å†…æœ‰è¯¦è§£ \"field\": \"datetime\", \"min_doc_count\": 1, \"time_zone\": \"Asia/Shanghai\" }, \"aggs\": { ---- \"avg_grade\": { | \"avg\": { | \"field\": \"value\" | } | }, | \"max_price\": { | \"max\": { |--&gt; // é’ˆå¯¹ä¸Šé¢èšåˆåäº§ç”Ÿçš„æ–‡æ¡£ï¼Œå†æ¬¡è¿›è¡Œèšåˆæ“ä½œ \"field\": \"value\" | } | }, | \"min_price\": { | \"min\": { | \"field\": \"value\" | } | } | } ---- } //\"3\": { } --- //\"4\": { } | --&gt; // å¯¹æ–‡æ¡£è¿›è¡Œå…¶ä»–èšåˆ //\"5\": { } --- }, \"_source\": { // è¿‡æ»¤è®¾ç½® \"includes\": [ \"value\", \"datetime\" ], \"excludes\": [] }, \"query\": { // æŸ¥è¯¢ \"bool\": { \"filter\": { \"range\": { \"datetime\": { \"time_zone\": \"Asia/Shanghai\", \"format\":\"yyyy-MM-dd HH:mm:ss\", \"gte\": \"2020-07-28 19:46:08\", \"lte\": \"2020-07-31 20:46:08\" } } }, \"must\": [ { \"match\": { \"sname\": \"gwaf_monitor_srv\" } }, { \"match\": { \"mname\": \"server_monitor\" } }, { \"match\": { \"iname\": \"mem\" } } ] } }, \"sort\": [ // æ’åº { \"datetime\": \"asc\" } ]} è¿”å›ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566{ \"took\" : 6, \"timed_out\" : false, \"_shards\" : { \"total\" : 24, \"successful\" : 24, \"skipped\" : 0, \"failed\" : 0 }, \"hits\" : { \"total\" : { \"value\" : 3012, \"relation\" : \"eq\" }, \"max_score\" : null, \"hits\" : [ ] }, \"aggregations\" : { \"2\" : { \"buckets\" : [ { \"key_as_string\" : \"2020-07-29 00:00:00\", \"key\" : 1595952000000, \"doc_count\" : 1175, \"max_price\" : { \"value\" : 292276.0 }, \"min_price\" : { \"value\" : 5144.0 }, \"avg_grade\" : { \"value\" : 13365.889361702128 } }, { \"key_as_string\" : \"2020-07-30 00:00:00\", \"key\" : 1596038400000, \"doc_count\" : 1432, \"max_price\" : { \"value\" : 188092.0 }, \"min_price\" : { \"value\" : 5436.0 }, \"avg_grade\" : { \"value\" : 10735.731843575419 } }, { \"key_as_string\" : \"2020-07-31 00:00:00\", \"key\" : 1596124800000, \"doc_count\" : 405, \"max_price\" : { \"value\" : 23408.0 }, \"min_price\" : { \"value\" : 5648.0 }, \"avg_grade\" : { \"value\" : 9392.266666666666 } } ] } }} å¸¸ç”¨æ¡¶terms æ¡¶é’ˆå¯¹æŸä¸ªfieldçš„å€¼è¿›è¡Œåˆ†ç»„ï¼Œfieldæœ‰å‡ ç§å€¼å°±åˆ†æˆå‡ ç»„ termsæ¡¶åœ¨è¿›è¡Œåˆ†ç»„æ—¶ï¼Œä¼šçˆ²æ­¤fieldä¸­çš„æ¯ç§å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„æ¡¶ è¦æ³¨æ„æ­¤ â€œtermsæ¡¶â€ å’Œå¹³å¸¸ç”¨åœ¨ä¸»æŸ¥è¯¢queryä¸­çš„ â€œæŸ¥æ‰¾termsâ€ æ˜¯ä¸åŒçš„ä¸œè¥¿ å…·ä½“å®ä¾‹ï¼Œå…ˆæ’å…¥æ•°æ® 123{ \"color\": \"red\" }{ \"color\": \"green\" }{ \"color\": [\"red\", \"blue\"] } æ‰§è¡Œæœç´¢ 1234567891011121314GET 127.0.0.1/mytest/doc/_search{ \"query\": { \"match_all\": {} }, \"size\": 0, \"aggs\": { \"my_name\": { \"terms\": { \"field\": \"color\" // ä½¿ç”¨coloræ¥è¿›è¡Œåˆ†ç»„ } } }} termsèšåˆåº”è¯¥æ˜¯å­—æ®µç±»å‹keywordæˆ–é€‚ç”¨äºå­˜å‚¨æ¡¶èšåˆçš„ä»»ä½•å…¶ä»–æ•°æ®ç±»å‹ã€‚ä¸ºäº†ä¸å®ƒä¸€èµ·ä½¿ç”¨ï¼Œtextæ‚¨å°†éœ€è¦å¯ç”¨ fielddata ç»“æœ 1234567891011121314151617181920212223{ ... \"aggregations\": { \"my_name\": { \"doc_count_error_upper_bound\": 0, \"sum_other_doc_count\": 0, \"buckets\": [ { \"key\": \"blue\", \"doc_count\": 1 }, { \"key\": \"red\", \"doc_count\": 2 //è¡¨ç¤ºcolorä¸ºredçš„æ–‡æ¡£æœ‰2ä¸ªï¼Œæ­¤ä¾‹ä¸­å°±æ˜¯ {\"color\": \"red\"} å’Œ {\"color\": [\"red\", \"blue\"]}è¿™ä¸¤ä¸ªæ–‡æ¡£ }, { \"key\": \"green\", \"doc_count\": 1 } ] } }} å› ä¸ºcoloræ€»å…±æœ‰3ç§å€¼ï¼Œredã€blueã€greenï¼Œæ‰€ä»¥termsæ¡¶ä¸ºä»–ä»¬äº§ç”Ÿäº†3ä¸ªbucketï¼Œå¹¶è®¡ç®—äº†æ¯ä¸ªbucketä¸­ç¬¦åˆçš„æ–‡æ¡£æœ‰å“ªäº› bucketå’Œbucketé—´æ˜¯ç‹¬ç«‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ–‡æ¡£å¯ä»¥åŒæ—¶ç¬¦åˆå¥½å‡ ä¸ªbucketï¼Œåƒæ˜¯{&quot;color&quot;: [&quot;red&quot;, &quot;blue&quot;]}å°±åŒæ—¶ç¬¦åˆäº†redå’Œblue bucket å‚æ•° è§£é‡Š ä¾‹å­ field åˆ†ç»„ä¾æ® â€œfieldâ€: â€œcolorâ€ order å¯æ ¹æ® _count, _key ä½¿ç”¨ asc,desc æˆ–è€…èšåˆåè¯ ä¾‹1 â€œorderâ€: { â€œ_countâ€: â€œascâ€ } min_doc_count æœ€å°æ–‡ä»¶æ•° â€œmin_doc_countâ€: 10 missing å°†ç¼ºå°‘å‚æ•°èµ‹äºˆå€¼ â€œmissingâ€: â€œN/Aâ€ orderä¾‹å­ 1ï¼š 12345678910111213141516171819202122232425262728GET /_search{ \"aggs\": { \"genres\": { \"terms\": { \"field\": \"genre\", \"order\": { \"max_play_count\": \"desc\" } }, \"aggs\": { \"max_play_count\": { \"max\": { \"field\": \"play_count\" } } } } }}GET /_search{ \"aggs\": { \"genres\": { \"terms\": { \"field\": \"genre\", \"order\": { \"playback_stats.max\": \"desc\" } }, \"aggs\": { \"playback_stats\": { \"stats\": { \"field\": \"play_count\" } } } } }} orderå…¶ä»–çš„é«˜é˜¶ç”¨æ–¹æ³•å‚è€ƒå®˜æ–¹æ–‡æ¡£ESå®˜æ–¹æ–‡æ¡£-aggs-order date_histogram æ—¥æœŸç›´æ–¹å›¾ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªæ±‡æ€»ï¼Œè¦æ±‚åœ¨æ—¥å†æ—¶é—´ä¸­æ¯ä¸ªæœˆçš„å­˜å‚¨åˆ†åŒºé—´éš”ï¼š 1234567891011121314151617181920POST /sales/_search?size=0{ \"aggs\": { \"sales_over_time\": { \"date_histogram\": { \"field\": \"date\", // æ•°æ®ä¸­å­—æ®µå \"calendar_interval\": \"month\" // é—´éš”æ—¶é—´ //\"fixed_interval\": \"30d\" å›ºå®šé—´éš”æ—¶é—´ ä¸calendar_intervalåŒçº§ï¼Œä¸å¯åŒæ—¶ä½¿ç”¨ \"format\": \"yyyy-MM-dd\" // æŒ‡å®šæ—¶é—´æ ¼å¼ \"time_zone\": \"Asia/Shanghai\" // æ—¶åŒºè°ƒæ•´ \"offset\": \"+6h\" // ä»ä¸Šåˆå…­ç‚¹å¼€å§‹åˆ†ç»„ \"min_doc_count\": 0, // ä¸ºç©ºçš„è¯åˆ™å¡«å……0 \"extended_bounds\": { // éœ€è¦å¡«å……0çš„èŒƒå›´ \"min\": 1533556800000, \"max\": 1533806520000 } } } }} calendar_interval å‚æ•° è§£é‡Š minute (1m) åˆ†é’Ÿ hour (1h) å°æ—¶ day (1d) å¤© week (1w) å‘¨ month (1M) æœˆ quarter (1q) å­£ year (1y) å¹´ fixed_interval æ˜¯å›ºå®šé—´éš”æ—¶é—´ ä¸æ—¥å†æ„ŸçŸ¥é—´éš”ç›¸æ¯”ï¼Œå›ºå®šé—´éš”æ˜¯å›ºå®šæ•°é‡çš„SIå•ä½ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šåç¦»ï¼Œæ— è®ºå®ƒä»¬ä½äºæ—¥å†ä¸Šçš„å“ªä¸ªä½ç½®ã€‚ä¸€ç§’å§‹ç»ˆç”±1000æ¯«ç§’ç»„æˆã€‚è¿™å…è®¸ä»¥ä»»æ„å¤šä¸ªå—æ”¯æŒå•ä½æŒ‡å®šå›ºå®šé—´éš”ã€‚ ä½†æ˜¯ï¼Œè¿™æ„å‘³ç€å›ºå®šçš„æ—¶é—´é—´éš”ä¸èƒ½è¡¨ç¤ºå…¶ä»–å•ä½ï¼Œä¾‹å¦‚æœˆä»½ï¼Œå› ä¸ºä¸€ä¸ªæœˆçš„æŒç»­æ—¶é—´ä¸æ˜¯å›ºå®šçš„æ•°é‡ã€‚å°è¯•æŒ‡å®šæ—¥å†é—´éš”ï¼ˆä¾‹å¦‚æœˆä»½æˆ–å­£åº¦ï¼‰å°†å¼•å‘å¼‚å¸¸ã€‚ fixed_interval å‚æ•° è§£é‡Š milliseconds (ms) æ¯«ç§’ seconds (s) å®šä¹‰ä¸º1000æ¯«ç§’ hours (h) æ‰€æœ‰æ—¶é—´éƒ½æ˜¯ä»00åˆ†00ç§’å¼€å§‹ã€‚å®šä¹‰ä¸ºæ¯ä¸ª60åˆ†é’Ÿï¼ˆ3,600,000æ¯«ç§’ï¼‰ days (d) æ‰€æœ‰æ—¶é—´éƒ½æ˜¯ä»æœ€æ—©çš„æ—¶é—´å¼€å§‹ï¼Œé€šå¸¸æ˜¯00:00:00ï¼ˆåˆå¤œï¼‰ã€‚å®šä¹‰ä¸º24å°æ—¶ï¼ˆ86,400,000æ¯«ç§’ï¼‰ histogram ç›´æ–¹å›¾æ‰§è¡Œæ±‡æ€»æ—¶ï¼Œå°†è¯„ä¼°æ¯ä¸ªæ–‡æ¡£çš„ä»·æ ¼å­—æ®µå¹¶å°†å…¶å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„å­˜å‚¨æ¡¶-ä¾‹å¦‚ï¼Œå¦‚æœä»·æ ¼ä¸º32ä¸”å­˜å‚¨æ¡¶å¤§å°ä¸ºï¼Œ5åˆ™å››èˆäº”å…¥å°†äº§ç”Ÿç»“æœ30ï¼Œå› æ­¤æ–‡æ¡£å°†â€œè½å…¥â€ä¸å¯†é’¥å…³è”çš„æ¡¶30ã€‚ä¸ºäº†ä½¿å®ƒæ›´åŠ æ­£å¼ï¼Œè¿™é‡Œä½¿ç”¨äº†èˆå…¥å‡½æ•°ï¼š 1bucket_key = Math.floor((value - offset) / interval) * interval + offset intervalå¿…é¡»æ˜¯æ­£çš„å°æ•°ï¼Œè€Œoffsetå¿…é¡»åœ¨å°æ•°[0, interval) ï¼ˆå°æ•°å¤§äºæˆ–ç­‰äº0ä¸”å°äºintervalï¼‰ ä»¥ä¸‹ä»£ç æ®µæ ¹æ®äº§å“çš„â€œ priceé—´éš”â€å¯¹äº§å“è¿›è¡Œâ€œå­˜å‚¨æ¡¶â€ 50ï¼š 123456789101112131415POST /sales/_search?size=0{ \"aggs\": { \"prices\": { \"histogram\": { \"field\": \"price\", \"interval\": 50, \"extended_bounds\": { //é™å®šèŒƒå›´ \"min\": 0, \"max\": 500 } } } }} è¿”å›å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829{ ... \"aggregations\": { \"prices\": { \"buckets\": [ { \"key\": 0.0, \"doc_count\": 1 }, { \"key\": 50.0, \"doc_count\": 1 }, { \"key\": 100.0, \"doc_count\": 0 }, { \"key\": 150.0, \"doc_count\": 2 }, { \"key\": 200.0, \"doc_count\": 3 } ] } }} å¸¸ç”¨æŒ‡æ ‡èšåˆavg å¹³å‡å€¼123456POST /exams/_search?size=0{ \"aggs\": { \"avg_grade\": { \"avg\": { \"field\": \"grade\" } } }} 12345678{ ... \"aggregations\": { \"avg_grade\": { \"value\": 75.0 } }} max æœ€å¤§å€¼123456POST /sales/_search?size=0{ \"aggs\": { \"max_price\": { \"max\": { \"field\": \"price\" } } }} 12345678{ ... \"aggregations\": { \"max_price\": { \"value\": 200.0 } }} min æœ€å°å€¼123456POST /sales/_search?size=0{ \"aggs\": { \"min_price\": { \"min\": { \"field\": \"price\" } } }} 12345678{ ... \"aggregations\": { \"min_price\": { \"value\": 10.0 } }} sum æ€»å’Œ12345678910111213POST /sales/_search?size=0{ \"query\": { \"constant_score\": { \"filter\": { \"match\": { \"type\": \"hat\" } } } }, \"aggs\": { \"hat_prices\": { \"sum\": { \"field\": \"price\" } } }} 12345678{ ... \"aggregations\": { \"hat_prices\": { \"value\": 450.0 } }} median_absolute_deviation ä¸­ä½æ•°12345678910111213141516GET reviews/_search{ \"size\": 0, \"aggs\": { \"review_average\": { \"avg\": { \"field\": \"rating\" } }, \"review_variability\": { \"median_absolute_deviation\": { \"field\": \"rating\" } } }} 1234567891011{ ... \"aggregations\": { \"review_average\": { \"value\": 3.0 }, \"review_variability\": { \"value\": 2.0 } }} Query DSLæœç´¢esçš„Query DSLä»¥_searchä¸ºendpointï¼Œä¸»è¦åˆ†ä¸ºå¶å­æŸ¥è¯¢è¯­å¥ï¼ˆLeaf Query) å’Œ å¤åˆæŸ¥è¯¢è¯­å¥ (Compound query clauses)ã€‚ å¶å­æŸ¥è¯¢è¯­å¥ï¼ˆLeaf Query) ç”¨äºæŸ¥è¯¢æŸä¸ªç‰¹å®šçš„å­—æ®µï¼Œå¦‚ match , term æˆ– range ç­‰ å…¶ä¸­ä¸»è¦åŒ…æ‹¬ä¸¤ç±»ï¼šå•è¯åŒ¹é…å’Œå…¨æ–‡åŒ¹é…: å•è¯åŒ¹é…(Term Level Query)ä¸å¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ†è¯å¤„ç†ï¼Œç›´æ¥åŒ¹é…è¯¥å­—æ®µçš„å€’æ’ç´¢å¼•ï¼ŒåŒ…æ‹¬termã€termsã€rangeæŸ¥è¯¢è¯­å¥: term querytermæŸ¥è¯¢è¯­å¥ä¸ä¼šå¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ†è¯å¤„ç†ï¼Œç›´æ¥æ‹¿æŸ¥è¯¢è¾“å…¥çš„æ–‡æœ¬å»æ£€ç´¢ï¼Œå¦‚ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£æµ‹è¯•æ¡ˆä¾‹ï¼Œéå¸¸æ¸…æ™°: 12345678GET /_search{ \"query\": { \"term\": { \"exact_value\": \"Quick Foxes!\" //å¦‚æœexact_valueå­—æ®µç±»å‹æ˜¯keywordï¼Œåˆ™æœ‰ç»“æœï¼Œè‹¥ä¸ºtextåˆ™æ— ç»“æœ } }} terms queryè¿”å›åœ¨æä¾›çš„å­—æ®µä¸­åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç¡®åˆ‡æœ¯è¯­çš„æ–‡æ¡£ã€‚è¯¥termsæŸ¥è¯¢ä¸termæŸ¥è¯¢ç›¸åŒï¼Œé™¤äº†å¯ä»¥æœç´¢å¤šä¸ªå€¼ã€‚ 12345678GET /_search{ \"query\": { \"terms\": { \"user.id\": [ \"kimchy\", \"elkbee\" ] } }} åŒæ—¶æ”¯æŒæ–‡æ¡£æºçš„æŸ¥è¯¢ å‚æ•° è§£é‡Š index ï¼ˆå¿…éœ€ï¼Œå­—ç¬¦ä¸²ï¼‰ä»ä¸­è·å–å­—æ®µå€¼çš„ç´¢å¼•åç§°ã€‚ id ï¼ˆå¿…éœ€ï¼Œå­—ç¬¦ä¸²ï¼‰è¦ä»ä¸­è·å–å­—æ®µå€¼çš„æ–‡æ¡£çš„IDã€‚ path ï¼ˆå¿…éœ€ï¼Œå­—ç¬¦ä¸²ï¼‰è¦ä»ä¸­è·å–å­—æ®µå€¼çš„å­—æ®µåç§°ã€‚Elasticsearchå°†è¿™äº›å€¼ç”¨ä½œæŸ¥è¯¢çš„æœç´¢è¯ã€‚å¦‚æœå­—æ®µå€¼åŒ…å«åµŒå¥—çš„å†…éƒ¨å¯¹è±¡çš„æ•°ç»„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•è¯­æ³•è®¿é—®è¿™äº›å¯¹è±¡ã€‚ routing ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²ï¼‰ä»ä¸­è·å–æœ¯è¯­å€¼çš„æ–‡æ¡£çš„è‡ªå®šä¹‰è·¯ç”±å€¼ã€‚å¦‚æœåœ¨ä¸ºæ–‡æ¡£å»ºç«‹ç´¢å¼•æ—¶æä¾›äº†è‡ªå®šä¹‰è·¯ç”±å€¼ï¼Œåˆ™æ­¤å‚æ•°æ˜¯å¿…éœ€çš„ã€‚ ç¤ºä¾‹ï¼š 123456789101112GET my-index-000001/_search?pretty{ \"query\": { \"terms\": { \"color\" : { \"index\" : \"my-index-000001\", \"id\" : \"2\", \"path\" : \"color\" } } }} range queryèŒƒå›´æŸ¥è¯¢ä¸»è¦ç”¨äºdateæˆ–numberç±»å‹çš„å­—æ®µæŸ¥è¯¢ä¸­ï¼Œå’Œtermã€termsæŸ¥è¯¢ä¸€æ ·ï¼Œä¸è¿›è¡ŒæŸ¥è¯¢æ—¶åˆ†è¯: 123456789101112GET /_search{ \"query\": { \"range\": { \"age\": { \"gte\": 10, \"lte\": 20, \"boost\": 2.0 } } }} å‚æ•° è§£é‡Š gt ï¼ˆå¯é€‰ï¼‰å¤§äº gte ï¼ˆå¯é€‰ï¼‰å¤§äºæˆ–ç­‰äº lt ï¼ˆå¯é€‰ï¼‰å°äº lte ï¼ˆå¯é€‰ï¼‰å°äºæˆ–ç­‰äº format ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²ï¼‰ç”¨äºè½¬æ¢dateæŸ¥è¯¢ä¸­çš„å€¼çš„æ—¥æœŸæ ¼å¼ã€‚æœ‰å…³æœ‰æ•ˆè¯­æ³•ï¼Œè¯·å‚è§formatã€‚ time_zone ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²ï¼‰ ç”¨äºå°†æŸ¥è¯¢ä¸­çš„å€¼è½¬æ¢ä¸ºUTCçš„åè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼‰åç§»é‡æˆ– IANAæ—¶åŒºdateã€‚ boost ï¼ˆå¯é€‰ï¼Œfloatï¼‰æµ®ç‚¹æ•°ï¼Œç”¨äºé™ä½æˆ–å¢åŠ æŸ¥è¯¢çš„ ç›¸å…³æ€§åˆ†æ•°ã€‚é»˜è®¤ä¸º1.0 åœ¨rangeèŒƒå›´æŸ¥è¯¢ä¸­ï¼Œesæä¾›äº†ä¸€ç§æ›´åŠ ç®€ä¾¿çš„æ—¥æœŸè®¡ç®—ï¼Œnowè¡¨ç¤ºå½“å‰æ—¶é—´ï¼Œæ—¶é—´å•ä½y:å¹´ï¼ŒM:æœˆï¼Œd:å¤©ï¼ŒH:æ—¶ï¼Œm:åˆ†ï¼Œs:ç§’ï¼Œæ‰€ä»¥now-3yå°±è¡¨ç¤ºå½“å‰æ—¶é—´å‡å»3å¹´åçš„æ—¶é—´ã€‚ 123456789101112GET /_search{ \"query\": { \"range\": { \"timestamp\": { \"time_zone\": \"+01:00\", \"gte\": \"2020-01-01T00:00:00\", \"lte\": \"now\" } } }} prefix query è¯é¡¹å‰ç¼€æŸ¥è¯¢12345GET /_search{ \"query\": { \"prefix\" : { \"user\" : \"ki\" } }} wildcard query é€šé…ç¬¦æŸ¥è¯¢123456789101112131415161718GET /_search{ \"query\": { \"wildcard\" : { \"user\" : \"ki*y\" } }}GET /_search{ \"query\": { \"wildcard\": { \"user\": { \"value\": \"ki*y\", \"boost\": 2 } } } } regexp query æ­£åˆ™æŸ¥è¯¢1234567891011121314151617181920GET /_search{ \"query\": { \"regexp\":{ \"name.first\": \"s.*y\" } }}GET /_search{ \"query\": { \"regexp\":{ \"name.first\":{ \"value\":\"s.*y\", \"boost\":1.2 } } }} æ­£åˆ™è¯­æ³•å‚è€ƒï¼šhttps://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html#regexp-syntax fuzzy query æ¨¡ç³ŠæŸ¥è¯¢123456789101112131415161718192021GET /_search{ \"query\": { \"fuzzy\" : { \"user\" : \"ki\" } }}GET /_search{ \"query\": { \"fuzzy\" : { \"user\" : { \"value\": \"ki\", \"boost\": 1.0, \"fuzziness\": 2, \"prefix_length\": 0, \"max_expansions\": 100 } } }} ids æ ¹æ®æ–‡æ¡£idæŸ¥è¯¢123456789GET /_search{ \"query\": { \"ids\" : { \"type\" : \"_doc\", \"values\" : [\"1\", \"4\", \"100\"] } }} å…¨æ–‡åŒ¹é…(Full Text Query)å¯¹æŒ‡å®šçš„textç±»å‹çš„å­—æ®µè¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼Œä¼šå…ˆå¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ†è¯å¤„ç†ï¼Œä¾‹å¦‚ä½ è¾“å…¥çš„æŸ¥è¯¢æ–‡æœ¬æ˜¯â€æˆ‘åœ¨é©¬è·¯è¾¹â€ï¼Œesåœ¨åˆ†è¯å™¨çš„ä½œç”¨ä¸‹å°±ä¼šåˆ†è¯ä¸ºâ€æˆ‘â€ã€â€åœ¨â€ã€â€é©¬è·¯â€è¿™ä¹ˆå‡ ä¸ªå•è¯ï¼Œç„¶åå†å»åŒ¹é…ã€‚ match querymatch queryæ˜¯æœ€åŸºæœ¬çš„åŸºäºå…¨æ–‡æ£€ç´¢çš„å­—æ®µç±»æŸ¥è¯¢è¯­æ³•ï¼š 12345678910GET /_search{ \"query\": { \"match\": { \"message\": { \"query\": \"this is a test\" } } }} é‚£ä¹ˆè¿™é‡Œç»è¿‡åˆ†è¯åçš„thisã€isã€aã€testå„ä¸ªå•è¯ä¹‹é—´å°±æ˜¯é»˜è®¤ä¸ºâ€æˆ–â€çš„åŒ¹é…å…³ç³»ï¼Œå¯ä»¥é€šè¿‡operatorå…³é”®å­—æ¥æ˜¾å¼è®¾ç½®å„ä¸ªå•è¯é—´çš„åŒ¹é…å…³ç³»ï¼Œå¦‚ä¸‹: 1234567891011GET /_search{ \"query\": { \"match\": { \"message\": { \"query\": \"this is a test\", \"operator\": \"and\" } } }} ä¹Ÿå¯ä»¥é€šè¿‡minimum_should_matchå‚æ•°æ¥è®¾ç½®æ§åˆ¶éœ€è¦åŒ¹é…çš„å•è¯æ•°ï¼Œæ¯”å¦‚ä½ çš„æ–‡æ¡£é‡Œusernameå­˜çš„å†…å®¹æ˜¯â€this is a java enginerâ€ï¼Œé‚£ä¹ˆé€šè¿‡ä¸‹é¢çš„æŸ¥è¯¢è¯­å¥å¯ä»¥æ§åˆ¶æŸ¥è¯¢æ–‡æœ¬æœ€å°‘è¦åŒ¹é…åˆ°â€javaâ€ã€â€enginerâ€: 1234567891011GET /_search{ \"query\": { \"match\": { \"message\": { \"query\": \"java enginer\", \"minimum_should_match\": 2 } } }} è¿˜å¯ç”¨max_expansions æŒ‡å®šæ¨¡ç³ŠåŒ¹é…çš„æœ€å¤§è¯é¡¹æ•°ï¼Œé»˜è®¤æ˜¯50ã€‚æ¯”å¦‚ï¼šåå‘ç´¢å¼•ä¸­æœ‰ 100 ä¸ªè¯é¡¹ä¸ ucen æ¨¡ç³ŠåŒ¹é…ï¼Œåªé€‰ç”¨å‰50 ä¸ªã€‚ 12345678910111213GET ftq/_search{ \"query\": { \"match\": { \"content\": { \"query\": \"ucen elatic java\", \"fuzziness\": 2, \"minimum_should_match\": 2, \"max_expansions \": 50 } } }} match_phrase querymatch_phraseä¹Ÿæ˜¯å¯¹å­—æ®µè¿›è¡Œæ£€ç´¢ï¼Œå’Œmatchçš„åŒºåˆ«åœ¨äºï¼šmatch_queryæ˜¯æœ‰é¡ºåºè¦æ±‚çš„ï¼Œè€Œmatchæ˜¯æ— åºçš„ã€‚ 12345678GET /_search{ \"query\": { \"match_phrase\": { \"message\": \"this is a test\" } }} å¯ä»¥é€šè¿‡slopå‚æ•°æ¥æ§åˆ¶å•è¯ä¹‹é—´çš„å…è®¸é—´éš”: 1234567891011GET /_search{ \"query\": { \"match_phrase\": { \"message\": { \"query\": \"this is a test\", \"slop\": 2 } } }} multi match queryå¦‚æœä½ éœ€è¦åœ¨å¤šä¸ªå­—æ®µä¸Šè¿›è¡Œæ–‡æœ¬æœç´¢ï¼Œå¯ç”¨multi_match ã€‚multi_matchåœ¨ matchçš„åŸºç¡€ä¸Šæ”¯æŒå¯¹å¤šä¸ªå­—æ®µè¿›è¡Œæ–‡æœ¬æŸ¥è¯¢ã€‚ 123456789GET ftq/_search{ \"query\": { \"multi_match\" : { \"query\": \"lucene java\", \"fields\": [ \"title\", \"content\" ] } }} è¿˜å¯ä»¥ä½¿ç”¨*åŒ¹é…å¤šä¸ªå­—æ®µ 123456789GET ftq/_search{ \"query\": { \"multi_match\" : { \"query\": \"lucene java\", \"fields\": [ \"title\", \"cont*\" ] } }} query_string queryå¯ä»¥ä½¿ç”¨query_stringæŸ¥è¯¢æ¥åˆ›å»ºå¤æ‚çš„æœç´¢ï¼Œå…¶ä¸­åŒ…æ‹¬é€šé…ç¬¦ï¼Œè·¨å¤šä¸ªå­—æ®µçš„æœç´¢ç­‰ç­‰ã€‚å°½ç®¡ç”¨é€”å¹¿æ³›ï¼Œä½†æŸ¥è¯¢æ˜¯ä¸¥æ ¼çš„ï¼Œå¦‚æœæŸ¥è¯¢å­—ç¬¦ä¸²åŒ…å«ä»»ä½•æ— æ•ˆè¯­æ³•ï¼Œåˆ™è¿”å›é”™è¯¯ã€‚ 123456789GET /_search{ \"query\": { \"query_string\": { \"query\": \"(new york city) OR (big apple)\", \"default_field\": \"content\" } }} æœç´¢å¤šå­—æ®µ 123456789GET /_search{ \"query\": { \"query_string\": { \"fields\": [ \"content\", \"name\" ], \"query\": \"this AND that\" } }} å¤åˆæŸ¥è¯¢è¯­å¥ (Compound query clauses) ç”¨äºåˆå¹¶å…¶ä»–çš„å¶æŸ¥è¯¢æˆ–å¤åˆæŸ¥è¯¢è¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´å¤åˆè¯­å¥ä¹‹é—´å¯ä»¥åµŒå¥—ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå¤æ‚çš„å•ä¸€æŸ¥è¯¢ï¼Œç±»æ¯”mysqlçš„whereå¤šæ¡ä»¶æŸ¥è¯¢ï¼Œesçš„å¤åˆæŸ¥è¯¢åŒ…æ‹¬Constant Score Queryã€Bool Queryã€Dis Max Queryã€Function Score Queryã€Boosting Queryï¼Œè¿™é‡Œè¯¦ç»†è¯´ä¸€è¯´ç”¨çš„æ¯”è¾ƒå¤šçš„Bool Queryã€‚ Bool QueryBool æŸ¥è¯¢ç”¨boolæ“ä½œæ¥ç»„åˆå¤šä¸ªæŸ¥è¯¢å­—å¥ä¸ºä¸€ä¸ªæŸ¥è¯¢ã€‚ å¯ç”¨çš„å…³é”®å­—ï¼š å‚æ•° è¯´æ˜ must æ ¹æ®mustä¸­çš„æ¡ä»¶è¿‡æ»¤æ–‡æ¡£ï¼Œè¿”å›çš„ç»“æœæ–‡æ¡£å¿…é¡»ä¸¥æ ¼åŒ¹é…æ¡ä»¶ï¼Œä¼šå½±å“ç›¸å…³æ€§ç®—åˆ† filter æ ¹æ®mustä¸­çš„æ¡ä»¶è¿‡æ»¤æ–‡æ¡£ï¼Œè¿”å›çš„ç»“æœæ–‡æ¡£å¿…é¡»ä¸¥æ ¼åŒ¹é…æ¡ä»¶ï¼Œå’Œmustä¸åŒçš„æ˜¯ï¼Œfilterä¸ä¼šå½±å“ç›¸å…³æ€§ç®—åˆ† should æ ¹æ®shouldä¸­çš„æ¡ä»¶è¿›è¡Œç­›é€‰ï¼Œè¿”å›çš„ç»“æœæ–‡æ¡£åº”è¯¥åŒ…å«shouldçš„æ¡ä»¶ï¼Œå½±å“ç›¸å…³æ€§ ç®—åˆ† must_not æ ¹æ®must_notä¸­çš„æ¡ä»¶è¿‡æ»¤æ–‡æ¡£ï¼Œè¿”å›çš„ç»“æœæ–‡æ¡£å¿…é¡»ä¸åŒ…å«must_notæ¡ä»¶ï¼Œä¼šå½±å“ç›¸å…³æ€§ç®—åˆ† 123456789101112131415161718192021222324POST _search{ \"query\": { \"bool\" : { \"must\" : { \"term\" : { \"user\" : \"kimchy\" } }, \"filter\": { \"term\" : { \"tag\" : \"tech\" } }, \"must_not\" : { \"range\" : { \"age\" : { \"gte\" : 10, \"lte\" : 20 } } }, \"should\" : [ { \"term\" : { \"tag\" : \"wow\" } }, { \"term\" : { \"tag\" : \"elasticsearch\" } } ], \"minimum_should_match\" : 1, \"boost\" : 1.0 } }} 1ã€mustã€must_notã€shouldæ”¯æŒæ•°ç»„ï¼ŒåŒæ—¶filterçš„æŸ¥è¯¢è¯­å¥ï¼Œesä¼šå¯¹å…¶è¿›è¡Œæ™ºèƒ½ç¼“å­˜ï¼Œå› æ­¤æ‰§è¡Œæ•ˆç‡è¾ƒé«˜ï¼Œåœ¨ä¸éœ€è¦ç®—åˆ†çš„æŸ¥è¯¢è¯­å¥ä¸­ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨filteræ›¿ä»£æ™®é€šçš„queryè¯­å¥; 2ã€æŸ¥è¯¢è¯­å¥åŒæ—¶åŒ…å«mustå’Œshouldæ—¶ï¼Œå¯ä»¥ä¸æ»¡è¶³shouldçš„æ¡ä»¶ï¼Œå› ä¸ºmustæ¡ä»¶ä¼˜å…ˆçº§é«˜äºshouldï¼Œä½†æ˜¯å¦‚æœä¹Ÿæ»¡è¶³shouldçš„æ¡ä»¶ï¼Œåˆ™ä¼šæé«˜ç›¸å…³æ€§ç®—åˆ†; 3ã€å¯ä»¥ä½¿ç”¨minimum_should_matchå‚æ•°æ¥æ§åˆ¶åº”å½“æ»¡è¶³æ¡ä»¶çš„ä¸ªæ•°æˆ–ç™¾åˆ†æ¯”; 4ã€mustã€must_notè¯­å¥é‡Œé¢å¦‚æœåŒ…å«å¤šä¸ªæ¡ä»¶ï¼Œåˆ™å„ä¸ªæ¡ä»¶é—´æ˜¯ä¸”çš„å…³ç³»ï¼Œè€Œshouldçš„å¤šä¸ªæ¡ä»¶æ˜¯æˆ–çš„å…³ç³»ã€‚ Filterå’ŒQueryçš„å¼‚åŒä¸€ä¸ªæŸ¥è¯¢è¯­å¥ç©¶ç«Ÿå…·æœ‰ä»€ä¹ˆæ ·çš„è¡Œä¸ºå’Œå¾—åˆ°ä»€ä¹ˆç»“æœï¼Œä¸»è¦å–å†³äºå®ƒåˆ°åº•æ˜¯å¤„äºæŸ¥è¯¢ä¸Šä¸‹æ–‡(Query Context) è¿˜æ˜¯è¿‡æ»¤ä¸Šä¸‹æ–‡(Filter Context)ã€‚ Query context æŸ¥è¯¢ä¸Šä¸‹æ–‡è¿™ç§è¯­å¥åœ¨æ‰§è¡Œæ—¶æ—¢è¦è®¡ç®—æ–‡æ¡£æ˜¯å¦åŒ¹é…ï¼Œè¿˜è¦è®¡ç®—æ–‡æ¡£ç›¸å¯¹äºå…¶ä»–æ–‡æ¡£çš„åŒ¹é…åº¦æœ‰å¤šé«˜ï¼ŒåŒ¹é…åº¦è¶Šé«˜ï¼Œ_score åˆ†æ•°å°±è¶Šé«˜ Filter context è¿‡æ»¤ä¸Šä¸‹æ–‡è¿‡æ»¤ä¸Šä¸‹æ–‡ä¸­çš„è¯­å¥åœ¨æ‰§è¡Œæ—¶åªå…³å¿ƒæ–‡æ¡£æ˜¯å¦å’ŒæŸ¥è¯¢åŒ¹é…ï¼Œä¸ä¼šè®¡ç®—åŒ¹é…åº¦ï¼Œä¹Ÿå°±æ˜¯å¾—åˆ†ã€‚ ä¸‹é¢æ¥çœ‹ä¸€ä¸ªä¾‹å­: 123456789101112131415161718192021222324252627282930313233GET /_search{ \"query\": { //å‚æ•°è¡¨ç¤ºæ•´ä¸ªè¯­å¥æ˜¯å¤„äº query context ä¸­ \"bool\": { //bool å’Œ match è¯­å¥è¢«ç”¨åœ¨ query context ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬ä¼šè®¡ç®—æ¯ä¸ªæ–‡æ¡£çš„åŒ¹é…åº¦ï¼ˆ_score) \"must\": [ { \"match\": { \"title\": \"Search\" } }, { \"match\": { \"content\": \"Elasticsearch\" } } ], \"filter\": [ //è¿™ä¸ªå­æŸ¥è¯¢å¤„äº filter context ä¸­ { \"term\": { //è¯­å¥ä¸­çš„ term å’Œ range è¯­å¥ç”¨åœ¨ filter context ä¸­ï¼Œå®ƒä»¬åªèµ·åˆ°è¿‡æ»¤çš„ä½œç”¨ï¼Œå¹¶ä¸ä¼šè®¡ç®—æ–‡æ¡£çš„å¾—åˆ†ã€‚ \"status\": \"published\" } }, { \"range\": { \"publish_date\": { \"gte\": \"2015-01-01\" } } } ] } }} ç»“è®ºï¼š 1 æŸ¥è¯¢ä¸Šä¸‹æ–‡ä¸­ï¼ŒæŸ¥è¯¢æ“ä½œä¸ä»…ä»…ä¼šè¿›è¡ŒæŸ¥è¯¢ï¼Œè¿˜ä¼šè®¡ç®—åˆ†å€¼ï¼Œç”¨äºç¡®å®šç›¸å…³åº¦ï¼›åœ¨è¿‡æ»¤å™¨ä¸Šä¸‹æ–‡ä¸­ï¼ŒæŸ¥è¯¢æ“ä½œä»…åˆ¤æ–­æ˜¯å¦æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ 2 è¿‡æ»¤å™¨ä¸Šä¸‹æ–‡ä¸­ï¼ŒæŸ¥è¯¢çš„ç»“æœå¯ä»¥è¢«ç¼“å­˜ã€‚ Elasticsearch Urlåœ°å€è¯´æ˜æ‹¿ä»¥ä¸‹æ·»åŠ å†…å®¹å‘½ä»¤ä¸¾ä¾‹è¯´æ˜ 12345curl -X PUT \"localhost:9200/customer/_doc/1?pretty\" -H 'Content-Type: application/json' -d'{ \"name\": \"John Doe\"}' URL è¯´æ˜ Localhost EsæœåŠ¡åœ°å€ /customer indexåï¼Œç±»ä¼¼Mysqlä¸­çš„åº“å /_doc å­—æ®µç±»å‹ /1 id ç´¢å¼•id pretty å°†è¿”å›çš„ä¿¡æ¯ä»¥å¯è¯»çš„JSONå½¢å¼è¿”å›ã€‚ â€œnameâ€: â€œJohn Doeâ€ æ·»åŠ å†…å®¹ å¸¸ç”¨URLå¥å­ è·å¾—èŠ‚é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åˆ—è¡¨ 1curl 'xxx:9200/_cat/nodes?v' æ£€æŸ¥é›†ç¾¤å¥åº· 1curl 'xxx:9200/_cat/health?v' åˆ—å‡ºæ‰€æœ‰çš„ç´¢å¼• 1curl 'xxx:9200/_cat/indices?v' æŸ¥çœ‹ESå“ªäº›è¿›ç¨‹åœ¨æ¶ˆè€—èµ„æº 1curl xxx:9200/_nodes/hot_threads?pretty æŸ¥çœ‹æŸæ¡è¯­å¥çš„æ€§èƒ½åˆ†æçŠ¶å†µ 1curl xxx:9200/xxx/_search?pretty -d '{\"profile\": true, \"query\" : { \"match\" : { \"xxx\" : \"xxx\" } }}' å¯¹æŸä¸ªindexè¿›è¡Œå¼ºåˆ¶åˆå¹¶segmentï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ 1curl xxx:9200/xxx/_forcemerge?pretty èŠ‚ç‚¹çŠ¶æ€æŸ¥è¯¢ 1curl xxx:9200/_nodes/stats?pretty å¸¸ç”¨URLå­—æ®µindexæ“ä½œé»˜è®¤ä¹‹å‰å¿…é¡»æºå¸¦indexå‰ç¼€ï¼Œæ¯”å¦‚ï¼š /customer/_search URL è¯´æ˜ /_search æœç´¢ /_aliases è·å–æˆ–æ“ä½œç´¢å¼•çš„åˆ«å /_count è¿”å›ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£æ•° /type åˆ›å»ºæˆ–æ“ä½œ ç±»å‹ /_mapping åˆ›å»ºæˆ–æ“ä½œ mapping /_settings åˆ›å»ºæˆ–æ“ä½œ è®¾ç½® (number_of_shardsæ˜¯ä¸å¯æ›´æ”¹çš„) /_open æ‰“å¼€è¢«å…³é—­çš„ç´¢å¼• /_close å…³é—­ç´¢å¼• /_refresh åˆ·æ–°ç´¢å¼•ï¼ˆä½¿æ–°åŠ å†…å®¹å¯¹æœç´¢å¯è§ï¼‰ /_flush åˆ·æ–°ç´¢å¼•å°†å˜åŠ¨æäº¤åˆ°luceneç´¢å¼•æ–‡ä»¶ä¸­å¹¶æ¸…ç©ºelasticsearchçš„transaction logï¼Œä¸refreshçš„åŒºåˆ«éœ€è¦ç»§ç»­ç ”ç©¶ /_optimize ä¼˜åŒ–segementï¼Œä¸ªäººè®¤ä¸ºä¸»è¦æ˜¯å¯¹segementè¿›è¡Œåˆå¹¶ /_status è·å¾—ç´¢å¼•çš„çŠ¶æ€ä¿¡æ¯ /_segments è·å¾—ç´¢å¼•çš„segmentsçš„çŠ¶æ€ä¿¡æ¯ /_explain ä¸æ‰§è¡Œå®é™…æœç´¢ï¼Œè€Œè¿”å›è§£é‡Šä¿¡æ¯ /_analyze ä¸æ‰§è¡Œå®é™…æœç´¢ï¼Œæ ¹æ®è¾“å…¥çš„å‚æ•°è¿›è¡Œæ–‡æœ¬åˆ†æ /index/type/id æ“ä½œæŒ‡å®šæ–‡æ¡£ /index/type/id/_create åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™è¿”å›å¤±è´¥ /index/type/id/_update æ›´æ–°ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ”¹æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›å¤±è´¥ Nodesæ“ä½œ URL è¯´æ˜ /_nodes/process æˆ‘ä¸»è¦çœ‹file descriptor è¿™ä¸ªä¿¡æ¯ /_nodes/process/stats ç»Ÿè®¡ä¿¡æ¯ï¼ˆå†…å­˜ã€CPUèƒ½ï¼‰ /_nodes/jvm è·å¾—å„èŠ‚ç‚¹çš„è™šæ‹Ÿæœºç»Ÿè®¡å’Œé…ç½®ä¿¡æ¯ /_nodes/jvm/stats æ›´è¯¦ç»†çš„è™šæ‹Ÿæœºä¿¡æ¯ /_nodes/http è·å¾—å„ä¸ªèŠ‚ç‚¹çš„httpä¿¡æ¯ï¼ˆå¦‚ipåœ°å€ï¼‰ /_nodes/http/stats è·å¾—å„ä¸ªèŠ‚ç‚¹å¤„ç†httpè¯·æ±‚çš„ç»Ÿè®¡æƒ…å†µ /_nodes/thread_pool è·å¾—å„ç§ç±»å‹çš„çº¿ç¨‹æ± ï¼ˆelasticsearchåˆ†åˆ«å¯¹ä¸åŒçš„æ“ä½œæä¾›ä¸åŒçš„çº¿ç¨‹æ± ï¼‰çš„é…ç½®ä¿¡æ¯ /_nodes/thread_pool/stats è·å¾—å„ç§ç±»å‹çš„çº¿ç¨‹æ± çš„ç»Ÿè®¡ä¿¡æ¯ ä»¥ä¸Šè¿™äº›æ“ä½œå’Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ 12345/_nodes/${nodeId}/jvm/stats/_nodes/${nodeip}/jvm/stats/_nodes/${nodeattribute}/jvm/stats é’ˆå¯¹æŒ‡å®šèŠ‚ç‚¹çš„æ“ä½œã€‚ Distributedæ“ä½œ URL è¯´æ˜ /_cluster/nodes è·å¾—é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åˆ—è¡¨å’Œä¿¡æ¯ /_cluster/health è·å¾—é›†ç¾¤ä¿¡æ¯ /_cluster/state è·å¾—é›†ç¾¤é‡Œçš„æ‰€æœ‰ä¿¡æ¯ï¼ˆé›†ç¾¤ä¿¡æ¯ã€èŠ‚ç‚¹ä¿¡æ¯ã€mappingä¿¡æ¯ç­‰ï¼‰ Elasticsearch è¿”å›ä½“è¯´æ˜ took â€“ Elasticsearchè¿è¡ŒæŸ¥è¯¢æ‰€éœ€çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ timed_out â€“æœç´¢è¯·æ±‚æ˜¯å¦è¶…æ—¶ _shards â€“æœç´¢äº†å¤šå°‘ä¸ªåˆ†ç‰‡ï¼Œä»¥åŠæˆåŠŸï¼Œå¤±è´¥æˆ–è·³è¿‡äº†å¤šå°‘ä¸ªåˆ†ç‰‡ã€‚ max_score â€“æ‰¾åˆ°çš„æœ€ç›¸å…³æ–‡ä»¶çš„åˆ†æ•° hits.total.value -æ‰¾åˆ°äº†å¤šå°‘ä¸ªåŒ¹é…çš„æ–‡æ¡£ hits.sort -æ–‡æ¡£çš„æ’åºä½ç½®ï¼ˆä¸æŒ‰ç›¸å…³æ€§å¾—åˆ†æ’åºæ—¶ï¼‰ hits._score-æ–‡æ¡£çš„ç›¸å…³æ€§å¾—åˆ†ï¼ˆä½¿ç”¨æ—¶ä¸é€‚ç”¨match_allï¼‰ Elasticsearch åŸºæœ¬æ•°æ®ç±»å‹ å­—ç¬¦ä¸² string æ•°å­—ç±»å‹ long integer double ç­‰ æ—¥æœŸ date å¸ƒå°”ç±»å‹ boolean äºŒè¿›åˆ¶ binary å¤æ‚çš„æ•°æ®ç±»å‹ æ•°ç»„ç±»å‹ å¯¹è±¡ç±»å‹ åµŒå¥—ç±»å‹ netsted åœ°ç†æ•°æ®ç±»å‹ ä¸“é—¨æ•°æ®ç±»å‹ ipv4 å®Œæˆæ•°æ®ç±»å‹ å•è¯è®¡æ•°ç±»å‹ å‚è€ƒæ–‡ç« : ESçš„å¸¸è§„æŒ‡ä»¤é›†åˆ ESå®˜æ–¹æ–‡æ¡£ ES-èšåˆ-aggs ElasticSearch ç³»åˆ—æ–‡ç«  DSLä»‹ç» Elastic Searchä¹‹Search API(Query DSL)ã€å­—æ®µç±»æŸ¥è¯¢ã€å¤åˆæŸ¥è¯¢","link":"/2020/08/06/Elasticsearch-%E5%88%9D%E6%AC%A1%E4%BD%BF%E7%94%A8/"},{"title":"Hexo åˆæ¬¡ä½¿ç”¨è®°å½•","text":"å®‰è£…å®‰è£…å‰æï¼Œé¦–å…ˆéœ€è¦å®‰è£…ä¸¤ä¸ªè½¯ä»¶ï¼š Node.js ç”¨äºå®‰è£…Hexo Git ç”¨äºä»£ç æäº¤å’Œå¤–ç½‘è®¿é—® è¯¦ç»†çš„å®‰è£…æ–¹å¼å¯è‡ªè¡Œæ ¹æ®è‡ªå·±çš„ç³»ç»Ÿç™¾åº¦æœç´¢å®‰è£…æ–¹å¼ï¼Œä»¥ä¸‹æ˜¯å‚è€ƒç½‘ç«™ï¼š https://hexo.io/zh-cn/docs/ å®‰è£… Hexoä»¥ä¸Šä¸¤ä¸ªè½¯ä»¶è£…å®Œåï¼Œå³å¯é€šè¿‡npmå®‰è£…Hexo 1$ npm install -g hexo-cli ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŒ‡å®šçš„æ–‡ä»¶ä¸‹ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ 123$ hexo init &lt;folder&gt; $ cd &lt;folder&gt;$ npm install è¿è¡Œå®Œæˆåä¼šå‡ºç°å¦‚ä¸‹æ–‡å­—ï¼š 1INFO Start blogging with Hexo! æ­å–œä½ ï¼Œå®‰è£…å®Œæˆã€‚ æ–°å»ºå®Œåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹ä¸‹ä¼šå‡ºç°çš„æ–‡ä»¶å¦‚ä¸‹ 12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes åˆæ­¥ä½¿ç”¨Hexoæœ¬åœ°è¿è¡ŒHexoå®‰è£…å¥½åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤: 12$ hexo g #generate ç”Ÿæˆé™æ€æ–‡ä»¶$ hexo s #server å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š [http://localhost:4000/](https://link.jianshu.com/?t=http://localhost:4000/) 123INFO Validating configINFO Start processingINFO Hexo is running at http://localhost:4000 . Press Ctrl+C to stop. å‡ºç°è¿™æ®µæ–‡å­—å³å¯è®¿é—® http://localhost:4000 , é¡µé¢å¦‚ä¸‹ è‡³æ­¤ï¼Œæœ¬åœ°Hexoæ­å»ºå®Œæˆ å¸¸ç”¨å‘½ä»¤12345$ hexo n \"myblog\" # =&gt; hexo new \"myblog\"$ hexo p # =&gt; hexo publish$ hexo g # =&gt; hexo generate$ hexo s # =&gt; hexo server$ hexo d # =&gt; hexo deploy æœåŠ¡å™¨å‘½ä»¤1234567$ hexo server # Hexo ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— é¡»é‡å¯æœåŠ¡å™¨$ hexo server -s # é™æ€æ¨¡å¼$ hexo server -p 5000 # æ›´æ”¹ç«¯å£$ hexo server -i 192.168.1.1 # è‡ªå®šä¹‰ IP$ hexo clean # æ¸…é™¤ç¼“å­˜ï¼Œç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤$ hexo g # ç”Ÿæˆé™æ€ç½‘é¡µ$ hexo d # å¼€å§‹éƒ¨ç½² è¿æ¥Hexoå’ŒGitGit SSHé…ç½®å…³äºSSHä½¿ç”¨SSHåè®®ï¼Œæ‚¨å¯ä»¥è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨å’ŒæœåŠ¡å¹¶è¿›è¡Œèº«ä»½éªŒè¯ã€‚ä½¿ç”¨SSHå¯†é’¥ï¼Œæ‚¨å¯ä»¥è¿æ¥åˆ°GitHubï¼Œè€Œæ— éœ€åœ¨æ¯æ¬¡è®¿é—®æ—¶éƒ½æä¾›ç”¨æˆ·åæˆ–å¯†ç ã€‚ æ£€æŸ¥ç°æœ‰çš„SSHå¯†é’¥ä»¥ä¸‹æ˜¯Macæ“ä½œç³»ç»Ÿï¼š æ‰“å¼€ Terminal. è¾“å…¥ls -al ~/.sshä»¥æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ç°æœ‰çš„SSHå¯†é’¥ï¼š 12$ ls -al ~/.ssh# Lists the files in your .ssh directory, if they exist æ£€æŸ¥ç›®å½•åˆ—è¡¨ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰å…¬å…±SSHå¯†é’¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå…¬å…±å¯†é’¥çš„æ–‡ä»¶åæ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š id_rsa.pub id_ecdsa.pub id_ed25519.pub å¦‚æœæ‚¨æ²¡æœ‰ç°æœ‰çš„å…¬é’¥å’Œç§é’¥å¯¹ï¼Œæˆ–è€…ä¸å¸Œæœ›ä½¿ç”¨ä»»ä½•å¯ç”¨äºè¿æ¥åˆ°GitHubï¼Œå¯ä»¥é‡æ–°ç”³è¯· å¦‚æœæ‚¨çœ‹åˆ°åˆ—å‡ºçš„ç°æœ‰å…¬å…±å’Œç§æœ‰å¯†é’¥å¯¹ï¼ˆä¾‹å¦‚id_rsa.pubå’Œid_rsaï¼‰ï¼Œæ‚¨å¸Œæœ›å°†å®ƒä»¬ç”¨äºè¿æ¥åˆ°GitHubï¼Œåˆ™å¯ä»¥å°†SSHå¯†é’¥æ·»åŠ åˆ°ssh-agentã€‚ ç”Ÿæˆæ–°çš„SSHå¯†é’¥ æ‰“å¼€ç»ˆç«¯ã€‚ ç²˜è´´ä»¥ä¸‹æ–‡æœ¬ï¼Œæ›¿æ¢ä¸ºæ‚¨çš„GitHubç”µå­é‚®ä»¶åœ°å€ã€‚ 1$ ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\" ä½¿ç”¨æä¾›çš„ç”µå­é‚®ä»¶ä½œä¸ºæ ‡ç­¾ï¼Œè¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„sshå¯†é’¥ã€‚ 1&gt; Generating public/private rsa key pair. å½“æç¤ºæ‚¨â€œè¾“å…¥è¦åœ¨å…¶ä¸­ä¿å­˜å¯†é’¥çš„æ–‡ä»¶â€æ—¶ï¼Œè¯·æŒ‰Enterã€‚è¿™æ¥å—é»˜è®¤æ–‡ä»¶ä½ç½®ã€‚ 1&gt; Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter] åœ¨æç¤ºç¬¦ä¸‹ï¼Œé”®å…¥ä¸€ä¸ªå®‰å…¨å¯†ç ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œä½¿ç”¨SSHå¯†é’¥å¯†ç çŸ­è¯­â€ã€‚ 12&gt; Enter passphrase (empty for no passphrase): [Type a passphrase]&gt; Enter same passphrase again: [Type passphrase again] å°†SSHå¯†é’¥æ·»åŠ åˆ°ssh-agentåœ¨å°†æ–°çš„SSHå¯†é’¥æ·»åŠ åˆ°ssh-agentæ¥ç®¡ç†å¯†é’¥ä¹‹å‰ï¼Œæ‚¨åº”è¯¥å·²ç»æ£€æŸ¥äº†ç°æœ‰çš„SSHå¯†é’¥å¹¶ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„SSHå¯†é’¥ã€‚å°†SSHå¯†é’¥æ·»åŠ åˆ°ä»£ç†æ—¶ï¼Œè¯·ä½¿ç”¨é»˜è®¤çš„macOS ssh-addå‘½ä»¤ï¼Œè€Œä¸è¦ä½¿ç”¨macportsï¼Œhomebrewæˆ–å…¶ä»–ä¸€äº›å¤–éƒ¨æºå®‰è£…çš„åº”ç”¨ç¨‹åºã€‚ åœ¨åå°å¯åŠ¨ssh-agentã€‚ 12$ eval \"$(ssh-agent -s)\"&gt; Agent pid 59566 å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯macOS Sierra 10.12.2æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦ä¿®æ”¹~/.ssh/configæ–‡ä»¶ä»¥å°†å¯†é’¥è‡ªåŠ¨åŠ è½½åˆ°ssh-agentä¸­å¹¶å°†å¯†ç çŸ­è¯­å­˜å‚¨åœ¨å¯†é’¥é“¾ä¸­ã€‚ é¦–å…ˆï¼Œæ£€æŸ¥~/.ssh/configæ–‡ä»¶æ˜¯å¦å­˜åœ¨äºé»˜è®¤ä½ç½®ã€‚ 12$ open ~/.ssh/config&gt; The file /Users/you/.ssh/config does not exist. å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·åˆ›å»ºæ–‡ä»¶ã€‚ 1$ touch ~/.ssh/config æ‰“å¼€~/.ssh/configæ–‡ä»¶ï¼Œç„¶åä¿®æ”¹æ–‡ä»¶ï¼Œ~/.ssh/id_rsaå¦‚æœæ‚¨æ²¡æœ‰ä½¿ç”¨é»˜è®¤ä½ç½®å’Œid_rsaå¯†é’¥åç§°ï¼Œåˆ™å°†å…¶æ›¿æ¢ã€‚ 1234Host * AddKeysToAgent yes UseKeychain yes IdentityFile ~/.ssh/id_rsa å°†æ‚¨çš„SSHç§é’¥æ·»åŠ åˆ°ssh-agentå¹¶å°†å¯†ç çŸ­è¯­å­˜å‚¨åœ¨é’¥åŒ™ä¸²ä¸­ã€‚å¦‚æœæ‚¨ä½¿ç”¨å…¶ä»–åç§°åˆ›å»ºå¯†é’¥ï¼Œæˆ–è€…è¦æ·»åŠ å…·æœ‰å…¶ä»–åç§°çš„ç°æœ‰å¯†é’¥ï¼Œè¯·ä½¿ç”¨ç§æœ‰å¯†é’¥æ–‡ä»¶çš„åç§°æ›¿æ¢å‘½ä»¤ä¸­çš„id_rsaã€‚ 1$ ssh-add -K ~/.ssh/id_rsa GitHubè´¦æˆ·æ·»åŠ æ–°çš„SSHå¯†é’¥åœ¨å°†æ–°çš„SSHå¯†é’¥æ·»åŠ åˆ°GitHubå¸æˆ·ä¹‹å‰ï¼Œæ‚¨åº”è¯¥å…·æœ‰ï¼š æ£€æŸ¥ç°æœ‰çš„SSHå¯†é’¥ ç”Ÿæˆä¸€ä¸ªæ–°çš„SSHå¯†é’¥å¹¶å°†å…¶æ·»åŠ åˆ°ssh-agent å°†æ–°çš„SSHå¯†é’¥æ·»åŠ åˆ°GitHubå¸æˆ·åï¼Œæ‚¨å¯ä»¥é‡æ–°é…ç½®ä»»ä½•æœ¬åœ°å­˜å‚¨åº“ä»¥ä½¿ç”¨SSHã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œå°†è¿œç¨‹URLä»HTTPSåˆ‡æ¢åˆ°SSHâ€ã€‚ æ³¨æ„ï¼šä¸å†æ”¯æŒDSAå¯†é’¥ï¼ˆSSH-DSSï¼‰ã€‚ç°æœ‰å¯†é’¥å°†ç»§ç»­èµ·ä½œç”¨ï¼Œä½†æ˜¯æ‚¨ä¸èƒ½å°†æ–°çš„DSAå¯†é’¥æ·»åŠ åˆ°GitHubå¸æˆ·ã€‚ å°†SSHå¯†é’¥å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚ å¦‚æœSSHå¯†é’¥æ–‡ä»¶çš„åç§°ä¸ç¤ºä¾‹ä»£ç çš„åç§°ä¸åŒï¼Œè¯·ä¿®æ”¹æ–‡ä»¶åä»¥åŒ¹é…å½“å‰è®¾ç½®ã€‚å¤åˆ¶å¯†é’¥æ—¶ï¼Œè¯·å‹¿æ·»åŠ ä»»ä½•æ¢è¡Œç¬¦æˆ–ç©ºæ ¼ã€‚ 12$ pbcopy &lt; ~/.ssh/id_rsa.pub# Copies the contents of the id_rsa.pub file to your clipboard æç¤ºï¼šå¦‚æœpbcopyä¸èµ·ä½œç”¨ï¼Œåˆ™å¯ä»¥æ‰¾åˆ°éšè—çš„.sshæ–‡ä»¶å¤¹ï¼Œåœ¨æ‚¨å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€æ–‡ä»¶ï¼Œç„¶åå°†å…¶å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚ åœ¨ä»»ä½•é¡µé¢çš„å³ä¸Šè§’ï¼Œç‚¹å‡»æ‚¨çš„ä¸ªäººèµ„æ–™ç…§ç‰‡ï¼Œç„¶åç‚¹å‡»è®¾ç½®ã€‚ åœ¨ç”¨æˆ·è®¾ç½®è¾¹æ ä¸­ï¼Œç‚¹å‡»SSHå’ŒGPGå¯†é’¥ã€‚ å•å‡»â€œ æ–°å»ºSSHå¯†é’¥â€æˆ–â€œ æ·»åŠ SSHå¯†é’¥â€ã€‚ åœ¨â€œæ ‡é¢˜â€å­—æ®µä¸­ï¼Œä¸ºæ–°å¯†é’¥æ·»åŠ ä¸€ä¸ªæè¿°æ€§æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ä¸ªäººMacï¼Œåˆ™å¯ä»¥å°†æ­¤é”®ç§°ä¸ºâ€œä¸ªäººMacBook Airâ€ã€‚ å°†æ‚¨çš„å¯†é’¥ç²˜è´´åˆ°â€œå¯†é’¥â€å­—æ®µä¸­ã€‚ å•å‡»æ·»åŠ SSHå¯†é’¥ã€‚ å¦‚æœå‡ºç°æç¤ºï¼Œè¯·ç¡®è®¤æ‚¨çš„GitHubå¯†ç ã€‚ æµ‹è¯•SSHè¿æ¥ æ‰“å¼€ç»ˆç«¯ã€‚ è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š 12$ ssh -T git@github.com# Attempts to ssh to GitHub æ‚¨å¯èƒ½ä¼šçœ‹åˆ°å¦‚ä¸‹è­¦å‘Šï¼š 123&gt; The authenticity of host 'github.com (IP ADDRESS)' can't be established.&gt; RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.&gt; Are you sure you want to continue connecting (yes/no)? æˆ–åƒè¿™æ ·ï¼š 123&gt; The authenticity of host 'github.com (IP ADDRESS)' can't be established.&gt; RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.&gt; Are you sure you want to continue connecting (yes/no)? éªŒè¯æ‚¨çœ‹åˆ°çš„æ¶ˆæ¯ä¸­çš„æŒ‡çº¹ä¸æ­¥éª¤2ä¸­çš„æ¶ˆæ¯ä¹‹ä¸€åŒ¹é…ï¼Œç„¶åé”®å…¥yesï¼š 12&gt; Hi username! You've successfully authenticated, but GitHub does not&gt; provide shell access. ä»¥ä¸ŠGit SSHéƒ¨åˆ†å…¨éƒ¨é…ç½®å®Œæˆã€‚ Git ä»“åº“é…ç½®é¦–å…ˆæ‰“å¼€githubï¼Œç‚¹å‡»New repositoryï¼Œåˆ›å»ºä¸€ä¸ªæ–°ä»“åº“ï¼Œä»“åº“åå¿…é¡»è¦éµå®ˆæ ¼å¼ï¼šè´¦æˆ·å.github.ioï¼Œä¸ç„¶æ¥ä¸‹æ¥ä¼šæœ‰å¾ˆå¤šéº»çƒ¦ã€‚å¹¶ä¸”éœ€è¦å‹¾é€‰Initialize this repository with a READMEã€‚å¦‚ä¸‹å›¾ ç„¶åé¡¹ç›®å°±å»ºæˆäº†ï¼Œç‚¹å‡»Settingsï¼Œå‘ä¸‹æ‹‰åˆ°æœ€åæœ‰ä¸ªGitHub Pagesï¼Œç‚¹å‡»Choose a themeé€‰æ‹©ä¸€ä¸ªä¸»é¢˜ã€‚ç„¶åç­‰ä¸€ä¼šå„¿ï¼Œå†å›åˆ°GitHub Pagesï¼Œä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š ç‚¹å‡»é‚£ä¸ªé“¾æ¥ï¼Œå°±ä¼šå‡ºç°è‡ªå·±çš„ç½‘é¡µå•¦ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä»¥ä¸ŠGitä»“åº“é…ç½®å®Œæ¯•ï¼ Hexo é…ç½®åœ¨å®‰è£…Hexoçš„æ ¹ç›®å½•ä¸‹æ‰¾åˆ°_config.ymlæ–‡ä»¶ï¼Œä¿®æ”¹Deploymenté…ç½® 123456# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git #è¿æ¥æ–¹å¼ repository: git@github.com:zzdespair/zzdespair.github.io.git #åœ°å€ åœ¨ä¸‹è½½Codeä¸­èƒ½çœ‹åˆ° branch: master #é€‰æ‹©åˆ†æ”¯ é»˜è®¤master ä¸»åˆ†æ”¯ Hexoéƒ¨ç½²åˆ°gitæˆ‘ä»¬éœ€è¦å®‰è£…hexo-deployer-gitæ’ä»¶,åœ¨bHexoçš„æ ¹ç›®å½•ä¸‹è¿è¡Œä¸€ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£… 1$ npm install hexo-deployer-git --save ç„¶åè¾“å…¥hexo new post &quot;article title&quot;ï¼Œæ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚ ç„¶åæ‰“å¼€Hexo\\source\\_postsçš„ç›®å½•ï¼Œå¯ä»¥å‘ç°ä¸‹é¢å¤šäº†ä¸€ä¸ªæ–‡ä»¶å¤¹å’Œä¸€ä¸ª.mdæ–‡ä»¶ï¼Œä¸€ä¸ªç”¨æ¥å­˜æ”¾ä½ çš„å›¾ç‰‡ç­‰æ•°æ®ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ä½ çš„æ–‡ç« æ–‡ä»¶å•¦ã€‚ ç¼–å†™å®Œmarkdownæ–‡ä»¶åï¼Œæ ¹ç›®å½•ä¸‹è¾“å…¥hexo gç”Ÿæˆé™æ€ç½‘é¡µï¼Œç„¶åè¾“å…¥hexo så¯ä»¥æœ¬åœ°é¢„è§ˆæ•ˆæœï¼Œæœ€åè¾“å…¥hexo dä¸Šä¼ åˆ°githubä¸Šã€‚è¿™æ—¶æ‰“å¼€ä½ çš„github.ioä¸»é¡µå°±èƒ½çœ‹åˆ°å‘å¸ƒçš„æ–‡ç« å•¦ã€‚ å‚è€ƒæ–‡ç« - [1] Hexoå®˜æ–¹æ–‡æ¡£ - [2] ç®€ä¹¦-ä½¿ç”¨hexoæ­å»ºgithubåšå®¢ - [3] çŸ¥ä¹-è¶…è¯¦ç»†Hexo+Githubåšå®¢æ­å»ºå°ç™½æ•™ç¨‹ - [4] ç®€ä¹¦-Hexo æ­å»ºä¸ªäººåšå®¢ #01 æ¡†æ¶çš„æœ¬åœ°å®‰è£…ä¸è¿è¡Œ - [5] åœ¨æœ¬åœ°æ­å»ºHexoåšå®¢æ¡†æ¶ï¼Œå¹¶éƒ¨ç½²åˆ°Github - [6] Connecting to GitHub with SSH","link":"/2020/08/04/hello-hexo/"},{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2020/08/04/hello-world/"}],"tags":[{"name":"Elasticsearch","slug":"Elasticsearch","link":"/tags/Elasticsearch/"},{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"},{"name":"Blog","slug":"Blog","link":"/tags/Blog/"}],"categories":[]}